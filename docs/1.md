# Backend API Scaffold Framework å®Œæ•´æŒ‡å—

## ğŸ“– ç›®å½•

1. [æ¡†æ¶æ¦‚è¿°](#æ¡†æ¶æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
3. [æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§](#æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§)
4. [é¡¹ç›®ç»“æ„è¯¦è§£](#é¡¹ç›®ç»“æ„è¯¦è§£)
5. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
6. [æ–°åŠŸèƒ½å¼€å‘æŒ‡å—](#æ–°åŠŸèƒ½å¼€å‘æŒ‡å—)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
8. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
9. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¡†æ¶æ¦‚è¿°

### ğŸ¯ é¡¹ç›®å®šä½

**Backend API Scaffold** æ˜¯ä¸€ä¸ªå®Œæ•´çš„åç«¯APIæœåŠ¡è„šæ‰‹æ¶æ¡†æ¶ï¼ŒåŸºäº Node.js + Express + MySQL æŠ€æœ¯æ ˆæ„å»ºã€‚å®ƒä¸“é—¨è®¾è®¡ç”¨äºå¿«é€Ÿæ­å»ºåŒç«¯APIæœåŠ¡ï¼ŒåŒæ—¶æ”¯æŒ**å°ç¨‹åºç«¯**å’Œ**åå°ç®¡ç†ç«¯**çš„æ•°æ®éœ€æ±‚ã€‚

### ğŸŒŸ æ ¸å¿ƒä»·å€¼

- **å¼€ç®±å³ç”¨**: å®Œæ•´çš„è®¤è¯ã€æƒé™ã€ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
- **åŒç«¯æ”¯æŒ**: ä¸€å¥—åç«¯åŒæ—¶æœåŠ¡Cç«¯å’ŒBç«¯éœ€æ±‚
- **ç”Ÿäº§å°±ç»ª**: å®Œå–„çš„å®‰å…¨é˜²æŠ¤ã€æ—¥å¿—ç³»ç»Ÿã€é”™è¯¯å¤„ç†
- **é«˜æ‰©å±•æ€§**: æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
- **æµ‹è¯•å®Œå¤‡**: å®Œæ•´çš„æµ‹è¯•æ¡†æ¶å’Œç¤ºä¾‹
- **æ–‡æ¡£é½å…¨**: è¯¦ç»†çš„APIæ–‡æ¡£å’Œå¼€å‘æŒ‡å—

### ğŸ“Š é€‚ç”¨åœºæ™¯

- âœ… å°ç¨‹åºé¡¹ç›®åç«¯API
- âœ… ç§»åŠ¨APPåç«¯æœåŠ¡
- âœ… ç®¡ç†åå°ç³»ç»Ÿ
- âœ… ä¸­å°å‹Webåº”ç”¨åç«¯
- âœ… å¿«é€ŸåŸå‹å¼€å‘
- âœ… å­¦ä¹ ç°ä»£Node.jså¼€å‘å®è·µ

---

## æŠ€æœ¯æ¶æ„

### ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å°ç¨‹åºç«¯      â”‚    â”‚   ç®¡ç†åå°      â”‚    â”‚   ç§»åŠ¨APP       â”‚
â”‚   (Cç«¯ç”¨æˆ·)     â”‚    â”‚   (Bç«¯ç®¡ç†å‘˜)   â”‚    â”‚   (ç”¨æˆ·ç«¯)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                       â”‚                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    API Gateway Layer    â”‚
                    â”‚   (ç»Ÿä¸€æ¥å£å…¥å£)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   /api/v1/*     â”‚    â”‚  /api/admin/*   â”‚    â”‚   å…¶ä»–ç‰ˆæœ¬API   â”‚
â”‚   (å°ç¨‹åºAPI)   â”‚    â”‚  (ç®¡ç†å‘˜API)    â”‚    â”‚   (æ‰©å±•æ¥å£)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                       â”‚                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Business Logic Layer  â”‚
                    â”‚   (ä¸šåŠ¡é€»è¾‘å±‚)          â”‚
                    â”‚  Controllers/Services   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Data Access Layer    â”‚
                    â”‚   (æ•°æ®è®¿é—®å±‚)          â”‚
                    â”‚   Models/Database       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     MySQL Database      â”‚
                    â”‚   (å…³ç³»å‹æ•°æ®åº“)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

| åˆ†å±‚ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|----------|------|
| **è¿è¡Œç¯å¢ƒ** | Node.js 16+ | JavaScript è¿è¡Œæ—¶ |
| **Webæ¡†æ¶** | Express.js | è½»é‡çº§ã€é«˜æ€§èƒ½çš„Webæ¡†æ¶ |
| **æ•°æ®åº“** | MySQL 5.7+ | å…³ç³»å‹æ•°æ®åº“ |
| **ORM** | Sequelize | å¼ºå¤§çš„Node.js ORM |
| **è®¤è¯** | JWT + bcryptjs | JSON Web Token + å¯†ç åŠ å¯† |
| **æ—¥å¿—** | Winston | åˆ†çº§æ—¥å¿—ç³»ç»Ÿ |
| **éªŒè¯** | express-validator | æ•°æ®éªŒè¯ä¸­é—´ä»¶ |
| **å®‰å…¨** | Helmet + CORS | HTTPå®‰å…¨å¤´ + è·¨åŸŸæ”¯æŒ |
| **æµ‹è¯•** | Jest + Supertest | å•å…ƒæµ‹è¯• + APIæµ‹è¯• |
| **æ–‡æ¡£** | JSDoc + Markdown | ä»£ç æ–‡æ¡£ + APIæ–‡æ¡£ |

### ğŸ” å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®‰å…¨é˜²æŠ¤å±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Helmet (HTTPå®‰å…¨å¤´)                                       â”‚
â”‚ â€¢ CORS (è·¨åŸŸèµ„æºå…±äº«)                                       â”‚
â”‚ â€¢ Rate Limiting (è¯·æ±‚é¢‘ç‡é™åˆ¶)                              â”‚
â”‚ â€¢ Input Validation (è¾“å…¥éªŒè¯)                               â”‚
â”‚ â€¢ SQL Injection Prevention (SQLæ³¨å…¥é˜²æŠ¤)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è®¤è¯æˆæƒå±‚                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ JWT Token Authentication (JWTä»¤ç‰Œè®¤è¯)                   â”‚
â”‚ â€¢ Role-Based Access Control (åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶)           â”‚
â”‚ â€¢ Permission Level Control (æƒé™ç­‰çº§æ§åˆ¶)                  â”‚
â”‚ â€¢ Account Lockout Protection (è´¦æˆ·é”å®šä¿æŠ¤)                â”‚
â”‚ â€¢ Session Management (ä¼šè¯ç®¡ç†)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### ğŸ‘¤ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

#### ğŸ”‘ å¤šç§ç™»å½•æ–¹å¼
- **ç”¨æˆ·åç™»å½•**: æ”¯æŒç”¨æˆ·å/å¯†ç ç™»å½•
- **é‚®ç®±ç™»å½•**: æ”¯æŒé‚®ç®±/å¯†ç ç™»å½•  
- **æ‰‹æœºå·ç™»å½•**: æ”¯æŒæ‰‹æœºå·/å¯†ç ç™»å½•
- **å°ç¨‹åºç™»å½•**: å¾®ä¿¡å°ç¨‹åº OAuth ç™»å½•
- **Tokenåˆ·æ–°**: è‡ªåŠ¨ç»­æœŸæœºåˆ¶

#### ğŸ”’ å¯†ç å®‰å…¨ç­–ç•¥
```javascript
// å¯†ç ç­–ç•¥é…ç½® (config/auth.js)
password: {
  minLength: 6,           // æœ€å°é•¿åº¦
  maxLength: 128,         // æœ€å¤§é•¿åº¦
  requireNumbers: false,  // æ˜¯å¦è¦æ±‚æ•°å­—
  requireLowercase: false,// æ˜¯å¦è¦æ±‚å°å†™å­—æ¯
  requireUppercase: false,// æ˜¯å¦è¦æ±‚å¤§å†™å­—æ¯
  requireSymbols: false,  // æ˜¯å¦è¦æ±‚ç‰¹æ®Šç¬¦å·
  saltRounds: 12         // bcrypt åŠ å¯†è½®æ¬¡
}
```

#### ğŸ›¡ï¸ è´¦æˆ·ä¿æŠ¤æœºåˆ¶
- **ç™»å½•å¤±è´¥é”å®š**: è¿ç»­å¤±è´¥5æ¬¡é”å®š15åˆ†é’Ÿ
- **JWTåŒä»¤ç‰Œ**: è®¿é—®ä»¤ç‰Œ(7å¤©) + åˆ·æ–°ä»¤ç‰Œ(30å¤©)
- **ä¼šè¯ç®¡ç†**: å•ç”¨æˆ·æœ€å¤š5ä¸ªå¹¶å‘ä¼šè¯
- **IPåœ°å€è®°å½•**: è®°å½•ç™»å½•IPå’Œæ—¶é—´

### ğŸ­ æƒé™ç®¡ç†ç³»ç»Ÿ

#### ğŸ“Š 5çº§æƒé™ä½“ç³»
```javascript
// æƒé™ç­‰çº§ (æ•°å­—è¶Šå¤§æƒé™è¶Šé«˜)
roleHierarchy: {
  guest: 0,        // æ¸¸å®¢
  user: 10,        // æ™®é€šç”¨æˆ·  
  moderator: 20,   // ç‰ˆä¸»
  admin: 30,       // ç®¡ç†å‘˜
  super_admin: 99  // è¶…çº§ç®¡ç†å‘˜
}
```

#### ğŸ” è®¿é—®æ§åˆ¶æœºåˆ¶
- **è§’è‰²ç»§æ‰¿**: é«˜ç­‰çº§è§’è‰²è‡ªåŠ¨åŒ…å«ä½ç­‰çº§æƒé™
- **èµ„æºæ‰€æœ‰æƒ**: ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„èµ„æº
- **ç®¡ç†å‘˜ç‰¹æƒ**: ç®¡ç†å‘˜å¯è®¿é—®æ‰€æœ‰èµ„æº
- **ç»†ç²’åº¦æ§åˆ¶**: æ”¯æŒæ¥å£çº§æƒé™æ§åˆ¶

### ğŸŒ åŒç«¯APIè®¾è®¡

#### ğŸ“± å°ç¨‹åºç«¯API (`/api/v1/`)
é¢å‘Cç«¯ç”¨æˆ·ï¼Œæä¾›åŸºç¡€ä¸šåŠ¡åŠŸèƒ½ï¼š
```javascript
// ç”¨æˆ·åŠŸèƒ½
GET    /api/v1/user/profile        // è·å–ç”¨æˆ·èµ„æ–™
PUT    /api/v1/user/profile        // æ›´æ–°ç”¨æˆ·èµ„æ–™
GET    /api/v1/user/search         // æœç´¢ç”¨æˆ·

// è®¤è¯åŠŸèƒ½  
POST   /api/v1/auth/register       // ç”¨æˆ·æ³¨å†Œ
POST   /api/v1/auth/login          // ç”¨æˆ·ç™»å½•
POST   /api/v1/auth/refresh        // åˆ·æ–°Token
POST   /api/v1/auth/logout         // ç”¨æˆ·ç™»å‡º

// å°ç¨‹åºä¸“ç”¨
POST   /api/v1/miniprogram/login   // å°ç¨‹åºç™»å½•
GET    /api/v1/miniprogram/config  // è·å–é…ç½®
```

#### ğŸ¢ ç®¡ç†ç«¯API (`/api/admin/`)
é¢å‘Bç«¯ç®¡ç†å‘˜ï¼Œæä¾›ç®¡ç†åŠŸèƒ½ï¼š
```javascript
// ç”¨æˆ·ç®¡ç†
GET    /api/admin/users            // è·å–ç”¨æˆ·åˆ—è¡¨
GET    /api/admin/users/stats      // ç”¨æˆ·ç»Ÿè®¡
PUT    /api/admin/users/:id        // æ›´æ–°ç”¨æˆ·
DELETE /api/admin/users/:id        // åˆ é™¤ç”¨æˆ·
POST   /api/admin/users/batch      // æ‰¹é‡æ“ä½œ

// ç³»ç»Ÿç®¡ç†
GET    /api/admin/system/info      // ç³»ç»Ÿä¿¡æ¯
GET    /api/admin/system/health    // å¥åº·æ£€æŸ¥
```

### ğŸ“Š æ•°æ®åº“è®¾è®¡

#### ğŸ‘¤ ç”¨æˆ·è¡¨ç»“æ„
```sql
CREATE TABLE users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE,
  phone VARCHAR(20) UNIQUE,
  password VARCHAR(255),
  nickname VARCHAR(50),
  avatar TEXT,
  gender ENUM('male', 'female', 'unknown') DEFAULT 'unknown',
  birthday DATE,
  role ENUM('super_admin', 'admin', 'moderator', 'user', 'guest') DEFAULT 'user',
  status ENUM('active', 'inactive', 'banned', 'pending') DEFAULT 'active',
  
  -- å°ç¨‹åºå­—æ®µ
  openid VARCHAR(100) UNIQUE,
  unionid VARCHAR(100) UNIQUE,
  
  -- å®‰å…¨å­—æ®µ
  email_verified BOOLEAN DEFAULT FALSE,
  phone_verified BOOLEAN DEFAULT FALSE,
  login_attempts INT DEFAULT 0,
  locked_until DATETIME,
  last_login_at DATETIME,
  last_login_ip VARCHAR(45),
  
  -- æ—¶é—´æˆ³
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at DATETIME
);
```

### ğŸ“ æ—¥å¿—ç³»ç»Ÿ

#### ğŸ“ˆ åˆ†çº§æ—¥å¿—è®°å½•
```javascript
// æ—¥å¿—çº§åˆ«
logger.error('ç³»ç»Ÿé”™è¯¯');   // é”™è¯¯æ—¥å¿—
logger.warn('å®‰å…¨è­¦å‘Š');    // è­¦å‘Šæ—¥å¿—  
logger.info('ä¸šåŠ¡æ“ä½œ');    // ä¿¡æ¯æ—¥å¿—
logger.debug('è°ƒè¯•ä¿¡æ¯');   // è°ƒè¯•æ—¥å¿—
```

#### ğŸ“‹ æ—¥å¿—åˆ†ç±»
- **è®¿é—®æ—¥å¿—**: è®°å½•æ‰€æœ‰APIè¯·æ±‚
- **ä¸šåŠ¡æ—¥å¿—**: è®°å½•ç”¨æˆ·æ“ä½œè¡Œä¸º
- **å®‰å…¨æ—¥å¿—**: è®°å½•è®¤è¯å’Œæƒé™äº‹ä»¶
- **é”™è¯¯æ—¥å¿—**: è®°å½•ç³»ç»Ÿå¼‚å¸¸å’Œé”™è¯¯
- **æ…¢è¯·æ±‚æ—¥å¿—**: è®°å½•å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼çš„è¯·æ±‚

### ğŸ§ª æµ‹è¯•æ¡†æ¶

#### âœ… æµ‹è¯•è¦†ç›–
- **å•å…ƒæµ‹è¯•**: å·¥å…·å‡½æ•°ã€ä¸­é—´ä»¶ã€æœåŠ¡å±‚
- **é›†æˆæµ‹è¯•**: APIç«¯ç‚¹å®Œæ•´æµç¨‹
- **è®¤è¯æµ‹è¯•**: JWTå’Œæƒé™æ§åˆ¶
- **é”™è¯¯æµ‹è¯•**: å¼‚å¸¸å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ

#### ğŸ¯ æµ‹è¯•å‘½ä»¤
```bash
npm test                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:coverage       # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:unit          # å•å…ƒæµ‹è¯•
npm run test:integration   # é›†æˆæµ‹è¯•
npm run test:watch         # ç›‘å¬æ¨¡å¼
```

---

## é¡¹ç›®ç»“æ„è¯¦è§£

```
backend-api-scaffold/
â”œâ”€â”€ ğŸ“ config/                    # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ app.js                   # åº”ç”¨é…ç½® (CORSã€ä¸Šä¼ ã€åˆ†é¡µç­‰)
â”‚   â”œâ”€â”€ auth.js                  # è®¤è¯é…ç½® (JWTã€å¯†ç ç­–ç•¥ã€æƒé™ç­‰)
â”‚   â””â”€â”€ database.js              # æ•°æ®åº“é…ç½® (å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒ)
â”‚
â”œâ”€â”€ ğŸ“ src/                       # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ controllers/          # æ§åˆ¶å™¨å±‚ (å¤„ç†HTTPè¯·æ±‚å“åº”)
â”‚   â”‚   â”œâ”€â”€ auth.js             # è®¤è¯æ§åˆ¶å™¨ (ç™»å½•ã€æ³¨å†Œã€ç™»å‡ºç­‰)
â”‚   â”‚   â””â”€â”€ user.js             # ç”¨æˆ·æ§åˆ¶å™¨ (ç”¨æˆ·ç®¡ç†åŠŸèƒ½)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ middleware/           # ä¸­é—´ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ auth.js             # è®¤è¯ä¸­é—´ä»¶ (JWTéªŒè¯ã€æƒé™æ§åˆ¶)
â”‚   â”‚   â”œâ”€â”€ error.js            # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ logger.js           # æ—¥å¿—ä¸­é—´ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ models/               # æ•°æ®æ¨¡å‹ç›®å½•
â”‚   â”‚   â””â”€â”€ User.js             # ç”¨æˆ·æ¨¡å‹ (Sequelizeæ¨¡å‹å®šä¹‰)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ routes/               # è·¯ç”±å®šä¹‰ç›®å½•
â”‚   â”‚   â”œâ”€â”€ index.js            # ä¸»è·¯ç”±å…¥å£
â”‚   â”‚   â””â”€â”€ ğŸ“ api/              # APIè·¯ç”±
â”‚   â”‚       â”œâ”€â”€ ğŸ“ v1/           # v1ç‰ˆæœ¬API (å°ç¨‹åºç«¯)
â”‚   â”‚       â”‚   â”œâ”€â”€ index.js    # v1è·¯ç”±å…¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ auth.js     # è®¤è¯è·¯ç”±
â”‚   â”‚       â”‚   â”œâ”€â”€ user.js     # ç”¨æˆ·è·¯ç”±
â”‚   â”‚       â”‚   â””â”€â”€ miniprogram.js # å°ç¨‹åºä¸“ç”¨è·¯ç”±
â”‚   â”‚       â””â”€â”€ ğŸ“ admin/        # ç®¡ç†å‘˜API
â”‚   â”‚           â”œâ”€â”€ index.js    # ç®¡ç†å‘˜è·¯ç”±å…¥å£
â”‚   â”‚           â”œâ”€â”€ auth.js     # ç®¡ç†å‘˜è®¤è¯è·¯ç”±
â”‚   â”‚           â””â”€â”€ user.js     # ç”¨æˆ·ç®¡ç†è·¯ç”±
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ services/             # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ authService.js      # è®¤è¯æœåŠ¡ (ä¸šåŠ¡é€»è¾‘å®ç°)
â”‚   â”‚   â””â”€â”€ userService.js      # ç”¨æˆ·æœåŠ¡ (ç”¨æˆ·ç›¸å…³ä¸šåŠ¡é€»è¾‘)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                # å·¥å…·å‡½æ•°ç›®å½•
â”‚   â”‚   â”œâ”€â”€ encrypt.js          # åŠ å¯†å·¥å…· (JWTã€bcryptã€Hashç­‰)
â”‚   â”‚   â”œâ”€â”€ logger.js           # æ—¥å¿—å·¥å…· (Winstoné…ç½®)
â”‚   â”‚   â”œâ”€â”€ response.js         # å“åº”å·¥å…· (ç»Ÿä¸€APIå“åº”æ ¼å¼)
â”‚   â”‚   â””â”€â”€ validate.js         # éªŒè¯å·¥å…· (æ•°æ®éªŒè¯è§„åˆ™)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ database/             # æ•°æ®åº“ç›¸å…³
â”‚       â”œâ”€â”€ connection.js       # æ•°æ®åº“è¿æ¥é…ç½®
â”‚       â”œâ”€â”€ migrate.js          # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚       â””â”€â”€ seed.js             # ç§å­æ•°æ®è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ tests/                     # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ helpers/              # æµ‹è¯•è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ ğŸ“ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ setup.js                # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚
â”œâ”€â”€ ğŸ“ docs/                      # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API.md                  # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ DEVELOPMENT.md          # å¼€å‘æŒ‡å—
â”‚   â””â”€â”€ FRAMEWORK_GUIDE.md      # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“ logs/                      # æ—¥å¿—æ–‡ä»¶ç›®å½• (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ ğŸ“ uploads/                   # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ app.js                       # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json                 # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ jest.config.js              # Jestæµ‹è¯•é…ç½®
â”œâ”€â”€ .env.example                # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

### ğŸ”§ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### ğŸ“‹ `app.js` - åº”ç”¨å…¥å£
```javascript
// ä¸»è¦åŠŸèƒ½:
// 1. åŠ è½½ç¯å¢ƒå˜é‡å’Œé…ç½®
// 2. è®¾ç½®å®‰å…¨ä¸­é—´ä»¶ (Helmet, CORS)
// 3. é…ç½®è¯·æ±‚é™åˆ¶å’Œè§£æ
// 4. æ³¨å†Œè·¯ç”±å’Œé”™è¯¯å¤„ç†
// 5. æ•°æ®åº“è¿æ¥å’ŒæœåŠ¡å¯åŠ¨
```

#### ğŸ› ï¸ `config/` - é…ç½®ç®¡ç†
- **æ¨¡å—åŒ–é…ç½®**: æŒ‰åŠŸèƒ½åˆ†ç¦»é…ç½®æ–‡ä»¶
- **ç¯å¢ƒåŒºåˆ†**: å¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒé…ç½®
- **ç±»å‹å®‰å…¨**: é…ç½®éªŒè¯å’Œé»˜è®¤å€¼

#### ğŸ® `controllers/` - æ§åˆ¶å™¨å±‚
- **èŒè´£å•ä¸€**: åªå¤„ç†HTTPè¯·æ±‚å“åº”
- **å‚æ•°éªŒè¯**: ä½¿ç”¨express-validatoréªŒè¯
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
- **å“åº”æ ¼å¼**: ä½¿ç”¨responseå·¥å…·ç»Ÿä¸€æ ¼å¼

#### ğŸ” `middleware/` - ä¸­é—´ä»¶å±‚
- **è®¤è¯ä¸­é—´ä»¶**: JWTéªŒè¯å’Œç”¨æˆ·ä¿¡æ¯æ³¨å…¥
- **æƒé™ä¸­é—´ä»¶**: è§’è‰²å’Œæƒé™æ£€æŸ¥
- **æ—¥å¿—ä¸­é—´ä»¶**: è¯·æ±‚æ—¥å¿—è®°å½•
- **é”™è¯¯ä¸­é—´ä»¶**: ç»Ÿä¸€é”™è¯¯å¤„ç†

#### ğŸ’¾ `models/` - æ•°æ®æ¨¡å‹å±‚
- **Sequelizeæ¨¡å‹**: ORMå¯¹è±¡å…³ç³»æ˜ å°„
- **æ•°æ®éªŒè¯**: æ¨¡å‹çº§åˆ«çš„æ•°æ®éªŒè¯
- **å…³è”å…³ç³»**: æ¨¡å‹é—´çš„å…³è”å®šä¹‰
- **é’©å­å‡½æ•°**: æ•°æ®æ“ä½œçš„ç”Ÿå‘½å‘¨æœŸé’©å­

#### ğŸ›£ï¸ `routes/` - è·¯ç”±å±‚
- **åˆ†å±‚è·¯ç”±**: æŒ‰ç‰ˆæœ¬å’ŒåŠŸèƒ½åˆ†ç»„
- **ç‰ˆæœ¬æ§åˆ¶**: æ”¯æŒå¤šAPIç‰ˆæœ¬å¹¶å­˜
- **æƒé™æ§åˆ¶**: è·¯ç”±çº§åˆ«çš„æƒé™éªŒè¯
- **å‚æ•°éªŒè¯**: è·¯ç”±å‚æ•°éªŒè¯

#### ğŸª `services/` - ä¸šåŠ¡é€»è¾‘å±‚
- **ä¸šåŠ¡å°è£…**: å¤æ‚ä¸šåŠ¡é€»è¾‘çš„å®ç°
- **æ•°æ®å¤„ç†**: ä¸šåŠ¡æ•°æ®çš„è½¬æ¢å’Œå¤„ç†
- **ç¬¬ä¸‰æ–¹é›†æˆ**: å¤–éƒ¨æœåŠ¡çš„è°ƒç”¨å°è£…
- **äº‹åŠ¡ç®¡ç†**: æ•°æ®åº“äº‹åŠ¡çš„ç®¡ç†

---

## å¿«é€Ÿå¼€å§‹

### ğŸš€ ç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚
- **Node.js**: >= 16.0.0
- **MySQL**: >= 5.7 æˆ– >= 8.0
- **npm**: >= 7.0.0

#### å¼€å‘å·¥å…·æ¨è
- **ä»£ç ç¼–è¾‘å™¨**: VS Code / WebStorm
- **æ•°æ®åº“å·¥å…·**: MySQL Workbench / DBeaver
- **APIæµ‹è¯•**: Postman / Insomnia
- **ç‰ˆæœ¬æ§åˆ¶**: Git

### ğŸ“¦ å®‰è£…é…ç½®

#### 1. é¡¹ç›®åˆå§‹åŒ–
```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd backend-api-scaffold

# å®‰è£…ä¾èµ–
npm install
```

#### 2. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡ (æ ¹æ®ä½ çš„å®é™…ç¯å¢ƒè°ƒæ•´)
vim .env
```

#### 3. `.env` é…ç½®è¯´æ˜
```env
# åº”ç”¨é…ç½®
NODE_ENV=development              # ç¯å¢ƒ: development/test/production
PORT=3000                        # æœåŠ¡ç«¯å£
APP_SECRET=your-secret-key       # åº”ç”¨å¯†é’¥

# æ•°æ®åº“é…ç½®
DB_HOST=localhost                # æ•°æ®åº“ä¸»æœº
DB_PORT=3306                     # æ•°æ®åº“ç«¯å£
DB_NAME=scaffold_db              # æ•°æ®åº“å
DB_USER=root                     # æ•°æ®åº“ç”¨æˆ·å
DB_PASSWORD=your_password        # æ•°æ®åº“å¯†ç 

# JWTé…ç½®
JWT_SECRET=your-jwt-secret       # JWTå¯†é’¥ (ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨å¼ºå¯†é’¥)
JWT_EXPIRES_IN=7d               # è®¿é—®ä»¤ç‰Œè¿‡æœŸæ—¶é—´
JWT_REFRESH_EXPIRES_IN=30d      # åˆ·æ–°ä»¤ç‰Œè¿‡æœŸæ—¶é—´

# å°ç¨‹åºé…ç½® (å¯é€‰)
MINIPROGRAM_APP_ID=wx_app_id     # å¾®ä¿¡å°ç¨‹åºAppID
MINIPROGRAM_APP_SECRET=wx_secret # å¾®ä¿¡å°ç¨‹åºSecret

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR=uploads               # ä¸Šä¼ ç›®å½•
MAX_FILE_SIZE=5MB               # æœ€å¤§æ–‡ä»¶å¤§å°

# æ—¥å¿—é…ç½®
LOG_LEVEL=info                  # æ—¥å¿—çº§åˆ«: debug/info/warn/error
```

#### 4. æ•°æ®åº“åˆå§‹åŒ–
```bash
# åˆ›å»ºæ•°æ®åº“ (MySQLå‘½ä»¤è¡Œ)
mysql -u root -p
CREATE DATABASE scaffold_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# è¿è¡Œæ•°æ®åº“è¿ç§»
npm run migrate

# åˆ›å»ºåˆå§‹æ•°æ® (å¯é€‰)
npm run seed
```

#### 5. å¯åŠ¨åº”ç”¨
```bash
# å¼€å‘æ¨¡å¼ (æ”¯æŒçƒ­é‡è½½)
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

### âœ… éªŒè¯å®‰è£…

è®¿é—®ä»¥ä¸‹URLéªŒè¯å®‰è£…æˆåŠŸï¼š

- **å¥åº·æ£€æŸ¥**: http://localhost:3000/health
- **APIä¿¡æ¯**: http://localhost:3000/
- **å°ç¨‹åºAPI**: http://localhost:3000/api/v1/
- **ç®¡ç†å‘˜API**: http://localhost:3000/api/admin/

#### é»˜è®¤æµ‹è¯•è´¦æˆ·
```javascript
// è¶…çº§ç®¡ç†å‘˜
username: admin
password: admin123456

// ç®¡ç†å‘˜  
username: manager
password: manager123456

// æµ‹è¯•ç”¨æˆ·
username: user001
password: user123456
```

---

## æ–°åŠŸèƒ½å¼€å‘æŒ‡å—

è¿™éƒ¨åˆ†å°†è¯¦ç»†è¯´æ˜å¦‚ä½•åŸºäºç°æœ‰æ¡†æ¶å¼€å‘æ–°åŠŸèƒ½ã€‚æˆ‘ä»¬ä»¥å¼€å‘ä¸€ä¸ª**æ–‡ç« ç®¡ç†åŠŸèƒ½**ä¸ºä¾‹ã€‚

### ğŸ“ å¼€å‘æµç¨‹æ¦‚è§ˆ

```
1. éœ€æ±‚åˆ†æ â†’ 2. æ•°æ®æ¨¡å‹è®¾è®¡ â†’ 3. APIæ¥å£è®¾è®¡ â†’ 4. æ•°æ®åº“è¿ç§» 
     â†“
8. æµ‹è¯•ç¼–å†™ â† 7. è·¯ç”±é…ç½® â† 6. æ§åˆ¶å™¨å®ç° â† 5. æœåŠ¡å±‚å®ç°
     â†“  
9. æ–‡æ¡£æ›´æ–° â†’ 10. éƒ¨ç½²ä¸Šçº¿
```

### ğŸ¯ éœ€æ±‚åˆ†æ

#### åŠŸèƒ½éœ€æ±‚
æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªæ–‡ç« ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š

**Cç«¯ç”¨æˆ·åŠŸèƒ½** (`/api/v1/articles/`):
- æŸ¥çœ‹æ–‡ç« åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€åˆ†ç±»ç­›é€‰)
- æŸ¥çœ‹æ–‡ç« è¯¦æƒ…
- æœç´¢æ–‡ç« 
- å‘å¸ƒæ–‡ç«  (éœ€è¦ç™»å½•)
- ç¼–è¾‘è‡ªå·±çš„æ–‡ç« 
- åˆ é™¤è‡ªå·±çš„æ–‡ç« 

**Bç«¯ç®¡ç†å‘˜åŠŸèƒ½** (`/api/admin/articles/`):
- ç®¡ç†æ‰€æœ‰æ–‡ç«  (å¢åˆ æ”¹æŸ¥)
- æ–‡ç« å®¡æ ¸ (å‘å¸ƒ/ä¸‹æ¶)
- æ–‡ç« ç»Ÿè®¡ (æ€»æ•°ã€åˆ†ç±»ç»Ÿè®¡)
- æ‰¹é‡æ“ä½œæ–‡ç« 

#### æ•°æ®ç»“æ„è®¾è®¡
```javascript
// æ–‡ç« æ•°æ®ç»“æ„
{
  id: 1,
  title: "æ–‡ç« æ ‡é¢˜",
  content: "æ–‡ç« å†…å®¹",
  summary: "æ–‡ç« æ‘˜è¦", 
  cover_image: "å°é¢å›¾ç‰‡URL",
  category: "æŠ€æœ¯åˆ†ç±»",
  tags: ["Node.js", "Express"],
  status: "published", // draft/published/archived
  view_count: 100,
  like_count: 50,
  author_id: 1,
  published_at: "2024-01-01T00:00:00Z",
  created_at: "2024-01-01T00:00:00Z",
  updated_at: "2024-01-01T00:00:00Z"
}
```

### ğŸ“Š Step 1: æ•°æ®æ¨¡å‹è®¾è®¡

#### åˆ›å»ºæ–‡ç« æ¨¡å‹
```bash
# åˆ›å»ºæ¨¡å‹æ–‡ä»¶
touch src/models/Article.js
```

```javascript
// src/models/Article.js
const { DataTypes } = require('sequelize');
const { sequelize } = require('../database/connection');

const Article = sequelize.define('Article', {
  id: {
    type: DataTypes.INTEGER,
    primaryKey: true,
    autoIncrement: true,
    comment: 'æ–‡ç« ID'
  },
  
  title: {
    type: DataTypes.STRING(200),
    allowNull: false,
    comment: 'æ–‡ç« æ ‡é¢˜',
    validate: {
      notEmpty: true,
      len: [1, 200]
    }
  },
  
  content: {
    type: DataTypes.TEXT('long'),
    allowNull: false,
    comment: 'æ–‡ç« å†…å®¹'
  },
  
  summary: {
    type: DataTypes.TEXT,
    allowNull: true,
    comment: 'æ–‡ç« æ‘˜è¦',
    validate: {
      len: [0, 500]
    }
  },
  
  cover_image: {
    type: DataTypes.TEXT,
    allowNull: true,
    comment: 'å°é¢å›¾ç‰‡URL'
  },
  
  category: {
    type: DataTypes.STRING(50),
    allowNull: false,
    defaultValue: 'general',
    comment: 'æ–‡ç« åˆ†ç±»'
  },
  
  tags: {
    type: DataTypes.JSON,
    allowNull: true,
    defaultValue: [],
    comment: 'æ–‡ç« æ ‡ç­¾'
  },
  
  status: {
    type: DataTypes.ENUM('draft', 'published', 'archived'),
    allowNull: false,
    defaultValue: 'draft',
    comment: 'æ–‡ç« çŠ¶æ€'
  },
  
  view_count: {
    type: DataTypes.INTEGER,
    allowNull: false,
    defaultValue: 0,
    comment: 'æµè§ˆæ¬¡æ•°'
  },
  
  like_count: {
    type: DataTypes.INTEGER,
    allowNull: false,
    defaultValue: 0,
    comment: 'ç‚¹èµæ¬¡æ•°'
  },
  
  author_id: {
    type: DataTypes.INTEGER,
    allowNull: false,
    comment: 'ä½œè€…ID',
    references: {
      model: 'users',
      key: 'id'
    }
  },
  
  published_at: {
    type: DataTypes.DATE,
    allowNull: true,
    comment: 'å‘å¸ƒæ—¶é—´'
  },
  
  created_at: {
    type: DataTypes.DATE,
    allowNull: false,
    defaultValue: DataTypes.NOW,
    comment: 'åˆ›å»ºæ—¶é—´'
  },
  
  updated_at: {
    type: DataTypes.DATE,
    allowNull: false,
    defaultValue: DataTypes.NOW,
    comment: 'æ›´æ–°æ—¶é—´'
  },
  
  deleted_at: {
    type: DataTypes.DATE,
    allowNull: true,
    comment: 'åˆ é™¤æ—¶é—´'
  }
}, {
  tableName: 'articles',
  timestamps: true,
  paranoid: true,
  underscored: true,
  indexes: [
    {
      name: 'idx_author_id',
      fields: ['author_id']
    },
    {
      name: 'idx_category',
      fields: ['category']
    },
    {
      name: 'idx_status',
      fields: ['status']
    },
    {
      name: 'idx_published_at',
      fields: ['published_at']
    }
  ]
});

// å®šä¹‰å…³è”å…³ç³»
Article.associate = function(models) {
  // æ–‡ç« å±äºç”¨æˆ·
  Article.belongsTo(models.User, {
    foreignKey: 'author_id',
    as: 'author'
  });
};

// å®ä¾‹æ–¹æ³•
Article.prototype.toJSON = function() {
  const values = { ...this.get() };
  return values;
};

// å¢åŠ æµè§ˆæ¬¡æ•°
Article.prototype.incrementViewCount = async function() {
  return this.increment('view_count');
};

// å¢åŠ ç‚¹èµæ¬¡æ•°
Article.prototype.incrementLikeCount = async function() {
  return this.increment('like_count');
};

module.exports = Article;
```

#### æ›´æ–°ç”¨æˆ·æ¨¡å‹å…³è”
```javascript
// src/models/User.js (åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ )

// æ·»åŠ å…³è”å…³ç³»
User.associate = function(models) {
  // ç”¨æˆ·æœ‰å¤šç¯‡æ–‡ç« 
  User.hasMany(models.Article, {
    foreignKey: 'author_id',
    as: 'articles'
  });
};
```

### ğŸ—„ï¸ Step 2: æ•°æ®åº“è¿ç§»

#### æ›´æ–°è¿ç§»è„šæœ¬
```javascript
// src/database/migrate.js (æ·»åŠ  Article æ¨¡å‹å¯¼å…¥)
require('dotenv').config();
const { sequelize } = require('./connection');

// å¯¼å…¥æ‰€æœ‰æ¨¡å‹
const User = require('../models/User');
const Article = require('../models/Article'); // æ–°å¢

// å»ºç«‹æ¨¡å‹å…³è”
const models = { User, Article };
Object.keys(models).forEach(key => {
  if ('associate' in models[key]) {
    models[key].associate(models);
  }
});

// å…¶ä½™ä»£ç ä¿æŒä¸å˜...
```

#### è¿è¡Œè¿ç§»
```bash
npm run migrate
```

### ğŸª Step 3: æœåŠ¡å±‚å®ç°

#### åˆ›å»ºæ–‡ç« æœåŠ¡
```bash
touch src/services/articleService.js
```

```javascript
// src/services/articleService.js
const Article = require('../models/Article');
const User = require('../models/User');
const { logBusinessAction, logDatabaseOperation } = require('../utils/logger');
const { Op } = require('sequelize');
const appConfig = require('../../config/app');

/**
 * è·å–æ–‡ç« åˆ—è¡¨æœåŠ¡
 */
async function getArticleList(filters = {}, pagination = {}) {
  const {
    search,
    category,
    status,
    author_id,
    startDate,
    endDate
  } = filters;
  
  const {
    page = appConfig.pagination.defaultPage,
    limit = appConfig.pagination.defaultLimit,
    sort = 'published_at:desc'
  } = pagination;
  
  // æ„å»ºæŸ¥è¯¢æ¡ä»¶
  const whereConditions = {};
  
  if (search) {
    whereConditions[Op.or] = [
      { title: { [Op.like]: `%${search}%` } },
      { summary: { [Op.like]: `%${search}%` } },
      { content: { [Op.like]: `%${search}%` } }
    ];
  }
  
  if (category) {
    whereConditions.category = category;
  }
  
  if (status) {
    whereConditions.status = status;
  } else {
    // é»˜è®¤åªæ˜¾ç¤ºå·²å‘å¸ƒçš„æ–‡ç« 
    whereConditions.status = 'published';
  }
  
  if (author_id) {
    whereConditions.author_id = author_id;
  }
  
  if (startDate || endDate) {
    whereConditions.published_at = {};
    if (startDate) whereConditions.published_at[Op.gte] = new Date(startDate);
    if (endDate) whereConditions.published_at[Op.lte] = new Date(endDate);
  }
  
  // æ„å»ºæ’åºæ¡ä»¶
  const [sortField, sortOrder] = sort.split(':');
  const order = [[sortField, sortOrder.toUpperCase()]];
  
  // è®¡ç®—åç§»é‡
  const offset = (page - 1) * limit;
  
  // æŸ¥è¯¢æ–‡ç« åˆ—è¡¨
  const { count, rows: articles } = await Article.findAndCountAll({
    where: whereConditions,
    include: [{
      model: User,
      as: 'author',
      attributes: ['id', 'username', 'nickname', 'avatar']
    }],
    order,
    limit: parseInt(limit),
    offset: parseInt(offset)
  });
  
  return {
    articles,
    pagination: {
      total: count,
      page: parseInt(page),
      limit: parseInt(limit)
    }
  };
}

/**
 * è·å–æ–‡ç« è¯¦æƒ…æœåŠ¡
 */
async function getArticleById(articleId, includeDeleted = false) {
  const options = {
    include: [{
      model: User,
      as: 'author',
      attributes: ['id', 'username', 'nickname', 'avatar']
    }]
  };
  
  if (includeDeleted) {
    options.paranoid = false;
  }
  
  const article = await Article.findByPk(articleId, options);
  
  if (!article) {
    throw new Error('æ–‡ç« ä¸å­˜åœ¨');
  }
  
  // å¢åŠ æµè§ˆæ¬¡æ•°
  await article.incrementViewCount();
  
  return article;
}

/**
 * åˆ›å»ºæ–‡ç« æœåŠ¡
 */
async function createArticle(articleData, author) {
  const {
    title,
    content,
    summary,
    cover_image,
    category,
    tags,
    status = 'draft'
  } = articleData;
  
  const article = await Article.create({
    title,
    content,
    summary,
    cover_image,
    category,
    tags,
    status,
    author_id: author.id,
    published_at: status === 'published' ? new Date() : null
  });
  
  logBusinessAction('article_created', {
    articleId: article.id,
    title: article.title,
    status: article.status
  }, author);
  
  return article;
}

/**
 * æ›´æ–°æ–‡ç« æœåŠ¡
 */
async function updateArticle(articleId, updateData, operator) {
  const article = await Article.findByPk(articleId);
  
  if (!article) {
    throw new Error('æ–‡ç« ä¸å­˜åœ¨');
  }
  
  // æ£€æŸ¥æƒé™ (ä½œè€…æˆ–ç®¡ç†å‘˜å¯ä»¥ç¼–è¾‘)
  if (article.author_id !== operator.id && 
      !['admin', 'super_admin'].includes(operator.role)) {
    throw new Error('æ²¡æœ‰æƒé™ç¼–è¾‘æ­¤æ–‡ç« ');
  }
  
  // è¿‡æ»¤å…è®¸æ›´æ–°çš„å­—æ®µ
  const allowedFields = ['title', 'content', 'summary', 'cover_image', 'category', 'tags', 'status'];
  const filteredData = {};
  
  Object.keys(updateData).forEach(key => {
    if (allowedFields.includes(key) && updateData[key] !== undefined) {
      filteredData[key] = updateData[key];
    }
  });
  
  // å¦‚æœçŠ¶æ€å˜ä¸ºå·²å‘å¸ƒï¼Œè®¾ç½®å‘å¸ƒæ—¶é—´
  if (filteredData.status === 'published' && article.status !== 'published') {
    filteredData.published_at = new Date();
  }
  
  const updatedArticle = await article.update(filteredData);
  
  logBusinessAction('article_updated', {
    articleId,
    updatedFields: Object.keys(filteredData)
  }, operator);
  
  return updatedArticle;
}

/**
 * åˆ é™¤æ–‡ç« æœåŠ¡
 */
async function deleteArticle(articleId, operator) {
  const article = await Article.findByPk(articleId);
  
  if (!article) {
    throw new Error('æ–‡ç« ä¸å­˜åœ¨');
  }
  
  // æ£€æŸ¥æƒé™ (ä½œè€…æˆ–ç®¡ç†å‘˜å¯ä»¥åˆ é™¤)
  if (article.author_id !== operator.id && 
      !['admin', 'super_admin'].includes(operator.role)) {
    throw new Error('æ²¡æœ‰æƒé™åˆ é™¤æ­¤æ–‡ç« ');
  }
  
  await article.destroy();
  
  logBusinessAction('article_deleted', { articleId }, operator);
  
  return true;
}

/**
 * æœç´¢æ–‡ç« æœåŠ¡
 */
async function searchArticles(keyword, limit = 10) {
  const articles = await Article.findAll({
    where: {
      [Op.or]: [
        { title: { [Op.like]: `%${keyword}%` } },
        { summary: { [Op.like]: `%${keyword}%` } }
      ],
      status: 'published'
    },
    include: [{
      model: User,
      as: 'author',
      attributes: ['id', 'username', 'nickname', 'avatar']
    }],
    attributes: ['id', 'title', 'summary', 'cover_image', 'category', 'published_at'],
    limit: parseInt(limit),
    order: [['published_at', 'DESC']]
  });
  
  return articles;
}

/**
 * è·å–æ–‡ç« ç»Ÿè®¡ä¿¡æ¯
 */
async function getArticleStats() {
  const totalArticles = await Article.count();
  const publishedArticles = await Article.count({ where: { status: 'published' } });
  const draftArticles = await Article.count({ where: { status: 'draft' } });
  const todayArticles = await Article.count({
    where: {
      created_at: {
        [Op.gte]: new Date(new Date().setHours(0, 0, 0, 0))
      }
    }
  });
  
  // æŒ‰åˆ†ç±»ç»Ÿè®¡
  const categoryStats = await Article.findAll({
    attributes: [
      'category',
      [Article.sequelize.fn('COUNT', Article.sequelize.col('id')), 'count']
    ],
    where: { status: 'published' },
    group: ['category']
  });
  
  return {
    total: totalArticles,
    published: publishedArticles,
    draft: draftArticles,
    today: todayArticles,
    categoryDistribution: categoryStats.map(item => ({
      category: item.category,
      count: parseInt(item.get('count'))
    }))
  };
}

/**
 * ç‚¹èµæ–‡ç« æœåŠ¡
 */
async function likeArticle(articleId, userId) {
  const article = await Article.findByPk(articleId);
  
  if (!article) {
    throw new Error('æ–‡ç« ä¸å­˜åœ¨');
  }
  
  if (article.status !== 'published') {
    throw new Error('æ–‡ç« æœªå‘å¸ƒï¼Œæ— æ³•ç‚¹èµ');
  }
  
  await article.incrementLikeCount();
  
  logBusinessAction('article_liked', { 
    articleId, 
    userId 
  }, { id: userId });
  
  return article;
}

module.exports = {
  getArticleList,
  getArticleById,
  createArticle,
  updateArticle,
  deleteArticle,
  searchArticles,
  getArticleStats,
  likeArticle
};
```

### ğŸ® Step 4: æ§åˆ¶å™¨å®ç°

#### åˆ›å»ºæ–‡ç« æ§åˆ¶å™¨
```bash
touch src/controllers/article.js
```

```javascript
// src/controllers/article.js
const articleService = require('../services/articleService');
const { success, error, paginated, asyncHandler } = require('../utils/response');
const { validationResult } = require('express-validator');

/**
 * @api {get} /api/v1/articles è·å–æ–‡ç« åˆ—è¡¨
 * @apiName GetArticleList
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const getArticleList = asyncHandler(async (req, res) => {
  const result = await articleService.getArticleList(req.query, req.query);
  return paginated(res, result.articles, result.pagination, 'è·å–æ–‡ç« åˆ—è¡¨æˆåŠŸ');
});

/**
 * @api {get} /api/v1/articles/:id è·å–æ–‡ç« è¯¦æƒ…
 * @apiName GetArticleDetail
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const getArticleDetail = asyncHandler(async (req, res) => {
  const { id } = req.params;
  const article = await articleService.getArticleById(id);
  return success(res, article, 'è·å–æ–‡ç« è¯¦æƒ…æˆåŠŸ');
});

/**
 * @api {post} /api/v1/articles åˆ›å»ºæ–‡ç« 
 * @apiName CreateArticle
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const createArticle = asyncHandler(async (req, res) => {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return error(res, 'æ•°æ®éªŒè¯å¤±è´¥', 422, errors.array());
  }

  const article = await articleService.createArticle(req.body, req.user);
  return success(res, article, 'æ–‡ç« åˆ›å»ºæˆåŠŸ', 201);
});

/**
 * @api {put} /api/v1/articles/:id æ›´æ–°æ–‡ç« 
 * @apiName UpdateArticle
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const updateArticle = asyncHandler(async (req, res) => {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return error(res, 'æ•°æ®éªŒè¯å¤±è´¥', 422, errors.array());
  }

  const { id } = req.params;
  const article = await articleService.updateArticle(id, req.body, req.user);
  return success(res, article, 'æ–‡ç« æ›´æ–°æˆåŠŸ');
});

/**
 * @api {delete} /api/v1/articles/:id åˆ é™¤æ–‡ç« 
 * @apiName DeleteArticle
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const deleteArticle = asyncHandler(async (req, res) => {
  const { id } = req.params;
  await articleService.deleteArticle(id, req.user);
  return success(res, null, 'æ–‡ç« åˆ é™¤æˆåŠŸ');
});

/**
 * @api {get} /api/v1/articles/search æœç´¢æ–‡ç« 
 * @apiName SearchArticles
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const searchArticles = asyncHandler(async (req, res) => {
  const { keyword, limit } = req.query;
  
  if (!keyword) {
    return error(res, 'æœç´¢å…³é”®è¯ä¸èƒ½ä¸ºç©º', 400);
  }

  const articles = await articleService.searchArticles(keyword, limit);
  return success(res, articles, 'æœç´¢æ–‡ç« æˆåŠŸ');
});

/**
 * @api {post} /api/v1/articles/:id/like ç‚¹èµæ–‡ç« 
 * @apiName LikeArticle
 * @apiGroup Article
 * @apiVersion 1.0.0
 */
const likeArticle = asyncHandler(async (req, res) => {
  const { id } = req.params;
  const article = await articleService.likeArticle(id, req.user.id);
  return success(res, { like_count: article.like_count }, 'ç‚¹èµæˆåŠŸ');
});

// ç®¡ç†å‘˜åŠŸèƒ½æ§åˆ¶å™¨

/**
 * @api {get} /api/admin/articles è·å–æ‰€æœ‰æ–‡ç« åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
 * @apiName AdminGetArticleList
 * @apiGroup AdminArticle
 * @apiVersion 1.0.0
 */
const adminGetArticleList = asyncHandler(async (req, res) => {
  // ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çŠ¶æ€çš„æ–‡ç« 
  const filters = { ...req.query };
  delete filters.status; // ç§»é™¤çŠ¶æ€é™åˆ¶
  
  const result = await articleService.getArticleList(filters, req.query);
  return paginated(res, result.articles, result.pagination, 'è·å–æ–‡ç« åˆ—è¡¨æˆåŠŸ');
});

/**
 * @api {put} /api/admin/articles/:id æ›´æ–°æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
 * @apiName AdminUpdateArticle
 * @apiGroup AdminArticle
 * @apiVersion 1.0.0
 */
const adminUpdateArticle = asyncHandler(async (req, res) => {
  const { id } = req.params;
  const article = await articleService.updateArticle(id, req.body, req.user);
  return success(res, article, 'æ–‡ç« æ›´æ–°æˆåŠŸ');
});

/**
 * @api {delete} /api/admin/articles/:id åˆ é™¤æ–‡ç« ï¼ˆç®¡ç†å‘˜ï¼‰
 * @apiName AdminDeleteArticle
 * @apiGroup AdminArticle
 * @apiVersion 1.0.0
 */
const adminDeleteArticle = asyncHandler(async (req, res) => {
  const { id } = req.params;
  await articleService.deleteArticle(id, req.user);
  return success(res, null, 'æ–‡ç« åˆ é™¤æˆåŠŸ');
});

/**
 * @api {get} /api/admin/articles/stats è·å–æ–‡ç« ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰
 * @apiName GetArticleStats
 * @apiGroup AdminArticle
 * @apiVersion 1.0.0
 */
const getArticleStats = asyncHandler(async (req, res) => {
  const stats = await articleService.getArticleStats();
  return success(res, stats, 'è·å–æ–‡ç« ç»Ÿè®¡æˆåŠŸ');
});

module.exports = {
  // æ™®é€šç”¨æˆ·åŠŸèƒ½
  getArticleList,
  getArticleDetail,
  createArticle,
  updateArticle,
  deleteArticle,
  searchArticles,
  likeArticle,
  
  // ç®¡ç†å‘˜åŠŸèƒ½
  adminGetArticleList,
  adminUpdateArticle,
  adminDeleteArticle,
  getArticleStats
};
```

### âœ… Step 5: æ•°æ®éªŒè¯

#### æ·»åŠ æ–‡ç« éªŒè¯è§„åˆ™
```javascript
// src/utils/validate.js (åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ )

/**
 * æ–‡ç« åˆ›å»ºéªŒè¯è§„åˆ™
 */
const createArticleValidation = [
  body('title')
    .isLength({ min: 1, max: 200 })
    .withMessage('æ–‡ç« æ ‡é¢˜é•¿åº¦å¿…é¡»åœ¨1-200ä¸ªå­—ç¬¦ä¹‹é—´'),
  
  body('content')
    .notEmpty()
    .withMessage('æ–‡ç« å†…å®¹ä¸èƒ½ä¸ºç©º'),
  
  body('summary')
    .optional()
    .isLength({ max: 500 })
    .withMessage('æ–‡ç« æ‘˜è¦ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦'),
  
  body('cover_image')
    .optional()
    .isURL()
    .withMessage('å°é¢å›¾ç‰‡å¿…é¡»æ˜¯æœ‰æ•ˆçš„URL'),
  
  body('category')
    .notEmpty()
    .withMessage('æ–‡ç« åˆ†ç±»ä¸èƒ½ä¸ºç©º')
    .isLength({ max: 50 })
    .withMessage('æ–‡ç« åˆ†ç±»ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦'),
  
  body('tags')
    .optional()
    .isArray()
    .withMessage('æ–‡ç« æ ‡ç­¾å¿…é¡»æ˜¯æ•°ç»„'),
  
  body('status')
    .optional()
    .isIn(['draft', 'published', 'archived'])
    .withMessage('æ–‡ç« çŠ¶æ€åªèƒ½æ˜¯draftã€publishedæˆ–archived')
];

/**
 * æ–‡ç« æ›´æ–°éªŒè¯è§„åˆ™
 */
const updateArticleValidation = [
  body('title')
    .optional()
    .isLength({ min: 1, max: 200 })
    .withMessage('æ–‡ç« æ ‡é¢˜é•¿åº¦å¿…é¡»åœ¨1-200ä¸ªå­—ç¬¦ä¹‹é—´'),
  
  body('content')
    .optional()
    .notEmpty()
    .withMessage('æ–‡ç« å†…å®¹ä¸èƒ½ä¸ºç©º'),
  
  body('summary')
    .optional()
    .isLength({ max: 500 })
    .withMessage('æ–‡ç« æ‘˜è¦ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦'),
  
  body('cover_image')
    .optional()
    .isURL()
    .withMessage('å°é¢å›¾ç‰‡å¿…é¡»æ˜¯æœ‰æ•ˆçš„URL'),
  
  body('category')
    .optional()
    .isLength({ max: 50 })
    .withMessage('æ–‡ç« åˆ†ç±»ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦'),
  
  body('tags')
    .optional()
    .isArray()
    .withMessage('æ–‡ç« æ ‡ç­¾å¿…é¡»æ˜¯æ•°ç»„'),
  
  body('status')
    .optional()
    .isIn(['draft', 'published', 'archived'])
    .withMessage('æ–‡ç« çŠ¶æ€åªèƒ½æ˜¯draftã€publishedæˆ–archived')
];

// å¯¼å‡ºéªŒè¯è§„åˆ™
module.exports = {
  // ... ç°æœ‰å¯¼å‡º
  createArticleValidation,
  updateArticleValidation
};
```

### ğŸ›£ï¸ Step 6: è·¯ç”±é…ç½®

#### åˆ›å»ºå°ç¨‹åºç«¯æ–‡ç« è·¯ç”±
```bash
touch src/routes/api/v1/article.js
```

```javascript
// src/routes/api/v1/article.js
const express = require('express');
const router = express.Router();

// å¯¼å…¥æ§åˆ¶å™¨
const articleController = require('../../../controllers/article');

// å¯¼å…¥ä¸­é—´ä»¶
const { authenticateToken, optionalAuth } = require('../../../middleware/auth');
const { 
  createArticleValidation,
  updateArticleValidation,
  idValidation,
  handleValidationErrors 
} = require('../../../utils/validate');

/**
 * å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰
 */

// è·å–æ–‡ç« åˆ—è¡¨
router.get('/', articleController.getArticleList);

// è·å–æ–‡ç« è¯¦æƒ…
router.get('/:id', 
  idValidation,
  handleValidationErrors,
  articleController.getArticleDetail
);

// æœç´¢æ–‡ç« 
router.get('/search', articleController.searchArticles);

/**
 * éœ€è¦è®¤è¯çš„æ¥å£
 */

// åˆ›å»ºæ–‡ç« 
router.post('/', 
  authenticateToken,
  createArticleValidation,
  handleValidationErrors,
  articleController.createArticle
);

// æ›´æ–°æ–‡ç« 
router.put('/:id', 
  authenticateToken,
  idValidation,
  updateArticleValidation,
  handleValidationErrors,
  articleController.updateArticle
);

// åˆ é™¤æ–‡ç« 
router.delete('/:id', 
  authenticateToken,
  idValidation,
  handleValidationErrors,
  articleController.deleteArticle
);

// ç‚¹èµæ–‡ç« 
router.post('/:id/like', 
  authenticateToken,
  idValidation,
  handleValidationErrors,
  articleController.likeArticle
);

module.exports = router;
```

#### åˆ›å»ºç®¡ç†å‘˜æ–‡ç« è·¯ç”±
```bash
touch src/routes/api/admin/article.js
```

```javascript
// src/routes/api/admin/article.js
const express = require('express');
const router = express.Router();

// å¯¼å…¥æ§åˆ¶å™¨
const articleController = require('../../../controllers/article');

// å¯¼å…¥ä¸­é—´ä»¶
const { requireSuperAdmin } = require('../../../middleware/auth');
const { 
  updateArticleValidation,
  idValidation,
  paginationValidation,
  handleValidationErrors 
} = require('../../../utils/validate');

/**
 * æ–‡ç« ç®¡ç†æ¥å£
 * æ³¨æ„ï¼šè¿™äº›æ¥å£å·²ç»åœ¨ä¸Šçº§è·¯ç”±ä¸­åº”ç”¨äº†è®¤è¯å’Œç®¡ç†å‘˜æƒé™ä¸­é—´ä»¶
 */

// è·å–æ–‡ç« ç»Ÿè®¡ä¿¡æ¯
router.get('/stats', articleController.getArticleStats);

// è·å–æ–‡ç« åˆ—è¡¨
router.get('/', 
  paginationValidation,
  handleValidationErrors,
  articleController.adminGetArticleList
);

// è·å–æŒ‡å®šæ–‡ç« è¯¦ç»†ä¿¡æ¯
router.get('/:id', 
  idValidation,
  handleValidationErrors,
  articleController.getArticleDetail
);

// æ›´æ–°æ–‡ç« ä¿¡æ¯
router.put('/:id', 
  idValidation,
  updateArticleValidation,
  handleValidationErrors,
  articleController.adminUpdateArticle
);

// åˆ é™¤æ–‡ç« 
router.delete('/:id', 
  idValidation,
  handleValidationErrors,
  articleController.adminDeleteArticle
);

module.exports = router;
```

#### æ³¨å†Œæ–‡ç« è·¯ç”±

```javascript
// src/routes/api/v1/index.js (æ·»åŠ æ–‡ç« è·¯ç”±)
const articleRoutes = require('./article');

// æ³¨å†Œå­è·¯ç”±
router.use('/auth', authRoutes);
router.use('/user', userRoutes);
router.use('/miniprogram', miniprogramRoutes);
router.use('/articles', articleRoutes); // æ–°å¢
```

```javascript
// src/routes/api/admin/index.js (æ·»åŠ æ–‡ç« è·¯ç”±)
const articleRoutes = require('./article');

// æ³¨å†Œå­è·¯ç”±
router.use('/auth', authRoutes);
router.use('/users', userRoutes);
router.use('/articles', articleRoutes); // æ–°å¢
```

### ğŸ§ª Step 7: æµ‹è¯•ç¼–å†™

#### åˆ›å»ºæ–‡ç« APIæµ‹è¯•
```bash
mkdir -p tests/integration
touch tests/integration/article.test.js
```

```javascript
// tests/integration/article.test.js
const request = require('supertest');
const app = require('../../app');
const { setupTestDatabase, cleanupTestDatabase, createTestUser } = require('../helpers/database');

describe('æ–‡ç« APIæµ‹è¯•', () => {
  let testUser;
  let adminUser;
  let userToken;
  let adminToken;
  let testArticle;

  beforeAll(async () => {
    await setupTestDatabase();
    
    // åˆ›å»ºæµ‹è¯•ç”¨æˆ·
    testUser = await createTestUser({
      username: 'article_test_user',
      email: 'article@test.com',
      password: 'test123456'
    });
    
    // åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
    adminUser = await createTestUser({
      username: 'article_admin',
      email: 'admin@test.com',
      password: 'admin123456',
      role: 'admin'
    });
    
    // è·å–ç™»å½•token
    const userLoginRes = await request(app)
      .post('/api/v1/auth/login')
      .send({
        account: 'article_test_user',
        password: 'test123456'
      });
    userToken = userLoginRes.body.data.token;
    
    const adminLoginRes = await request(app)
      .post('/api/v1/auth/login')
      .send({
        account: 'article_admin',
        password: 'admin123456'
      });
    adminToken = adminLoginRes.body.data.token;
  });

  afterAll(async () => {
    await cleanupTestDatabase();
  });

  describe('POST /api/v1/articles', () => {
    test('ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿåˆ›å»ºæ–‡ç« ', async () => {
      const articleData = {
        title: 'æµ‹è¯•æ–‡ç« æ ‡é¢˜',
        content: 'è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« çš„å†…å®¹',
        summary: 'æ–‡ç« æ‘˜è¦',
        category: 'tech',
        tags: ['æµ‹è¯•', 'Node.js'],
        status: 'published'
      };

      const response = await request(app)
        .post('/api/v1/articles')
        .set('Authorization', `Bearer ${userToken}`)
        .send(articleData)
        .expect(201);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveProperty('id');
      expect(response.body.data.title).toBe(articleData.title);
      expect(response.body.data.author_id).toBe(testUser.id);
      
      testArticle = response.body.data;
    });

    test('æœªç™»å½•ç”¨æˆ·ä¸èƒ½åˆ›å»ºæ–‡ç« ', async () => {
      const articleData = {
        title: 'æµ‹è¯•æ–‡ç« ',
        content: 'å†…å®¹',
        category: 'tech'
      };

      await request(app)
        .post('/api/v1/articles')
        .send(articleData)
        .expect(401);
    });

    test('åº”è¯¥éªŒè¯å¿…éœ€å­—æ®µ', async () => {
      const articleData = {
        title: '', // ç©ºæ ‡é¢˜
        // ç¼ºå°‘content
        category: 'tech'
      };

      const response = await request(app)
        .post('/api/v1/articles')
        .set('Authorization', `Bearer ${userToken}`)
        .send(articleData)
        .expect(422);

      expect(response.body.success).toBe(false);
      expect(response.body.errors).toBeDefined();
    });
  });

  describe('GET /api/v1/articles', () => {
    test('åº”è¯¥è¿”å›æ–‡ç« åˆ—è¡¨', async () => {
      const response = await request(app)
        .get('/api/v1/articles')
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toBeInstanceOf(Array);
      expect(response.body.pagination).toBeDefined();
      expect(response.body.pagination).toHaveProperty('total');
      expect(response.body.pagination).toHaveProperty('page');
    });

    test('æ”¯æŒåˆ†é¡µå‚æ•°', async () => {
      const response = await request(app)
        .get('/api/v1/articles?page=1&limit=5')
        .expect(200);

      expect(response.body.pagination.page).toBe(1);
      expect(response.body.pagination.per_page).toBe(5);
    });

    test('æ”¯æŒåˆ†ç±»ç­›é€‰', async () => {
      const response = await request(app)
        .get('/api/v1/articles?category=tech')
        .expect(200);

      expect(response.body.success).toBe(true);
    });
  });

  describe('GET /api/v1/articles/:id', () => {
    test('åº”è¯¥è¿”å›æ–‡ç« è¯¦æƒ…', async () => {
      const response = await request(app)
        .get(`/api/v1/articles/${testArticle.id}`)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.id).toBe(testArticle.id);
      expect(response.body.data.title).toBe(testArticle.title);
      expect(response.body.data.author).toBeDefined();
    });

    test('ä¸å­˜åœ¨çš„æ–‡ç« åº”è¯¥è¿”å›404', async () => {
      await request(app)
        .get('/api/v1/articles/99999')
        .expect(404);
    });
  });

  describe('PUT /api/v1/articles/:id', () => {
    test('ä½œè€…åº”è¯¥èƒ½å¤Ÿæ›´æ–°è‡ªå·±çš„æ–‡ç« ', async () => {
      const updateData = {
        title: 'æ›´æ–°åçš„æ ‡é¢˜',
        summary: 'æ›´æ–°åçš„æ‘˜è¦'
      };

      const response = await request(app)
        .put(`/api/v1/articles/${testArticle.id}`)
        .set('Authorization', `Bearer ${userToken}`)
        .send(updateData)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.title).toBe(updateData.title);
      expect(response.body.data.summary).toBe(updateData.summary);
    });

    test('éä½œè€…ä¸èƒ½æ›´æ–°æ–‡ç« ', async () => {
      const otherUser = await createTestUser({
        username: 'other_user',
        email: 'other@test.com',
        password: 'test123456'
      });

      const otherLoginRes = await request(app)
        .post('/api/v1/auth/login')
        .send({
          account: 'other_user',
          password: 'test123456'
        });
      const otherToken = otherLoginRes.body.data.token;

      const updateData = { title: 'æ¶æ„æ›´æ–°' };

      await request(app)
        .put(`/api/v1/articles/${testArticle.id}`)
        .set('Authorization', `Bearer ${otherToken}`)
        .send(updateData)
        .expect(403);
    });
  });

  describe('DELETE /api/v1/articles/:id', () => {
    test('ä½œè€…åº”è¯¥èƒ½å¤Ÿåˆ é™¤è‡ªå·±çš„æ–‡ç« ', async () => {
      const response = await request(app)
        .delete(`/api/v1/articles/${testArticle.id}`)
        .set('Authorization', `Bearer ${userToken}`)
        .expect(200);

      expect(response.body.success).toBe(true);

      // éªŒè¯æ–‡ç« å·²è¢«åˆ é™¤
      await request(app)
        .get(`/api/v1/articles/${testArticle.id}`)
        .expect(404);
    });
  });

  describe('ç®¡ç†å‘˜æ–‡ç« API', () => {
    test('ç®¡ç†å‘˜åº”è¯¥èƒ½è·å–æ–‡ç« ç»Ÿè®¡', async () => {
      const response = await request(app)
        .get('/api/admin/articles/stats')
        .set('Authorization', `Bearer ${adminToken}`)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveProperty('total');
      expect(response.body.data).toHaveProperty('published');
      expect(response.body.data).toHaveProperty('draft');
    });

    test('æ™®é€šç”¨æˆ·ä¸èƒ½è®¿é—®ç®¡ç†å‘˜æ¥å£', async () => {
      await request(app)
        .get('/api/admin/articles/stats')
        .set('Authorization', `Bearer ${userToken}`)
        .expect(403);
    });
  });
});
```

#### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ–‡ç« ç›¸å…³æµ‹è¯•
npm test -- tests/integration/article.test.js

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test
```

### ğŸ“š Step 8: æ›´æ–°æ–‡æ¡£

#### æ›´æ–°APIæ–‡æ¡£
```javascript
// docs/API.md (åœ¨æ–‡ä»¶ä¸­æ·»åŠ æ–‡ç« æ¥å£æ–‡æ¡£)

## æ–‡ç« æ¥å£

### è·å–æ–‡ç« åˆ—è¡¨
- **URL**: `GET /api/v1/articles`
- **æè¿°**: è·å–æ–‡ç« åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- **å‚æ•°**: `search`, `category`, `page`, `limit`, `sort`

### è·å–æ–‡ç« è¯¦æƒ…
- **URL**: `GET /api/v1/articles/:id`
- **æè¿°**: è·å–æŒ‡å®šæ–‡ç« è¯¦æƒ…
- **å‚æ•°**: `id` - æ–‡ç« ID

### åˆ›å»ºæ–‡ç« 
- **URL**: `POST /api/v1/articles`
- **æè¿°**: åˆ›å»ºæ–°æ–‡ç« 
- **è®¤è¯**: éœ€è¦
- **å‚æ•°**:
  ```json
  {
    "title": "æ–‡ç« æ ‡é¢˜",
    "content": "æ–‡ç« å†…å®¹",
    "summary": "æ–‡ç« æ‘˜è¦",
    "category": "æ–‡ç« åˆ†ç±»",
    "tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
    "status": "published"
  }
  ```

### æ›´æ–°æ–‡ç« 
- **URL**: `PUT /api/v1/articles/:id`
- **æè¿°**: æ›´æ–°æ–‡ç« ä¿¡æ¯
- **è®¤è¯**: éœ€è¦ï¼ˆä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰

### åˆ é™¤æ–‡ç« 
- **URL**: `DELETE /api/v1/articles/:id`
- **æè¿°**: åˆ é™¤æ–‡ç« 
- **è®¤è¯**: éœ€è¦ï¼ˆä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰

### æœç´¢æ–‡ç« 
- **URL**: `GET /api/v1/articles/search`
- **æè¿°**: æœç´¢æ–‡ç« 
- **å‚æ•°**: `keyword`, `limit`

### ç‚¹èµæ–‡ç« 
- **URL**: `POST /api/v1/articles/:id/like`
- **æè¿°**: ä¸ºæ–‡ç« ç‚¹èµ
- **è®¤è¯**: éœ€è¦

## ç®¡ç†å‘˜æ–‡ç« æ¥å£

### è·å–æ–‡ç« ç»Ÿè®¡
- **URL**: `GET /api/admin/articles/stats`
- **æè¿°**: è·å–æ–‡ç« ç»Ÿè®¡ä¿¡æ¯
- **æƒé™**: ç®¡ç†å‘˜

### ç®¡ç†æ–‡ç« åˆ—è¡¨
- **URL**: `GET /api/admin/articles`
- **æè¿°**: è·å–æ‰€æœ‰æ–‡ç« åˆ—è¡¨ï¼ˆåŒ…æ‹¬è‰ç¨¿ï¼‰
- **æƒé™**: ç®¡ç†å‘˜
```

### ğŸ“‹ Step 9: è®°å½•ä¿®æ”¹æ—¥å¿—

```bash
echo "

## $(date '+%Y-%m-%d') æ–‡ç« ç®¡ç†åŠŸèƒ½å¼€å‘

### æ–°å¢åŠŸèƒ½
å®Œæ•´çš„æ–‡ç« ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

#### 1. æ•°æ®æ¨¡å‹
- **æ–‡ç« æ¨¡å‹** - \`src/models/Article.js\`
- **ç”¨æˆ·æ–‡ç« å…³è”å…³ç³»** - ä¸€å¯¹å¤šå…³ç³»
- **æ•°æ®åº“è¿ç§»** - è‡ªåŠ¨åˆ›å»ºarticlesè¡¨

#### 2. ä¸šåŠ¡é€»è¾‘å±‚
- **æ–‡ç« æœåŠ¡** - \`src/services/articleService.js\`
- **å®Œæ•´CRUDæ“ä½œ** - åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤
- **æœç´¢åŠŸèƒ½** - æ ‡é¢˜ã€æ‘˜è¦ã€å†…å®¹æœç´¢
- **ç»Ÿè®¡åŠŸèƒ½** - æ–‡ç« æ•°é‡ã€åˆ†ç±»ç»Ÿè®¡
- **æƒé™æ§åˆ¶** - ä½œè€…æƒé™éªŒè¯

#### 3. APIæ¥å£
- **å°ç¨‹åºç«¯API** - \`/api/v1/articles/*\`
- **ç®¡ç†å‘˜API** - \`/api/admin/articles/*\`
- **æ•°æ®éªŒè¯** - å®Œæ•´çš„è¾“å…¥éªŒè¯è§„åˆ™
- **é”™è¯¯å¤„ç†** - ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼

#### 4. æµ‹è¯•ç”¨ä¾‹
- **é›†æˆæµ‹è¯•** - \`tests/integration/article.test.js\`
- **APIæµ‹è¯•** - å®Œæ•´çš„CRUDæ“ä½œæµ‹è¯•
- **æƒé™æµ‹è¯•** - ç”¨æˆ·æƒé™å’Œç®¡ç†å‘˜æƒé™æµ‹è¯•
- **è¾¹ç•Œæµ‹è¯•** - å¼‚å¸¸æƒ…å†µå’Œé”™è¯¯å¤„ç†æµ‹è¯•

### ä¸»è¦APIæ¥å£

#### å°ç¨‹åºç«¯API
- \`GET /api/v1/articles\` - è·å–æ–‡ç« åˆ—è¡¨
- \`GET /api/v1/articles/:id\` - è·å–æ–‡ç« è¯¦æƒ…
- \`POST /api/v1/articles\` - åˆ›å»ºæ–‡ç« 
- \`PUT /api/v1/articles/:id\` - æ›´æ–°æ–‡ç« 
- \`DELETE /api/v1/articles/:id\` - åˆ é™¤æ–‡ç« 
- \`GET /api/v1/articles/search\` - æœç´¢æ–‡ç« 
- \`POST /api/v1/articles/:id/like\` - ç‚¹èµæ–‡ç« 

#### ç®¡ç†å‘˜API
- \`GET /api/admin/articles\` - è·å–æ‰€æœ‰æ–‡ç« 
- \`GET /api/admin/articles/stats\` - æ–‡ç« ç»Ÿè®¡
- \`PUT /api/admin/articles/:id\` - ç®¡ç†å‘˜æ›´æ–°æ–‡ç« 
- \`DELETE /api/admin/articles/:id\` - ç®¡ç†å‘˜åˆ é™¤æ–‡ç« 

### æ–°å¢çš„æ–‡ä»¶
1. \`src/models/Article.js\` - æ–‡ç« æ•°æ®æ¨¡å‹
2. \`src/services/articleService.js\` - æ–‡ç« ä¸šåŠ¡é€»è¾‘
3. \`src/controllers/article.js\` - æ–‡ç« æ§åˆ¶å™¨
4. \`src/routes/api/v1/article.js\` - å°ç¨‹åºç«¯æ–‡ç« è·¯ç”±
5. \`src/routes/api/admin/article.js\` - ç®¡ç†å‘˜æ–‡ç« è·¯ç”±
6. \`tests/integration/article.test.js\` - æ–‡ç« APIæµ‹è¯•

### ä¿®æ”¹çš„æ–‡ä»¶
1. \`src/utils/validate.js\` - æ·»åŠ æ–‡ç« éªŒè¯è§„åˆ™
2. \`src/database/migrate.js\` - æ·»åŠ æ–‡ç« æ¨¡å‹å¯¼å…¥
3. \`src/routes/api/v1/index.js\` - æ³¨å†Œæ–‡ç« è·¯ç”±
4. \`src/routes/api/admin/index.js\` - æ³¨å†Œç®¡ç†å‘˜æ–‡ç« è·¯ç”±
5. \`docs/API.md\` - æ›´æ–°APIæ–‡æ¡£

### æŠ€æœ¯ç‰¹ç‚¹
- **åˆ†å±‚æ¶æ„**: æ¸…æ™°çš„MVCåˆ†å±‚ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼Œä¿è¯æ•°æ®å®‰å…¨
- **æ•°æ®éªŒè¯**: å®Œæ•´çš„è¾“å…¥éªŒè¯ï¼Œé˜²æ­¢æ— æ•ˆæ•°æ®
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **æµ‹è¯•è¦†ç›–**: å®Œæ•´çš„APIæµ‹è¯•ï¼Œä¿è¯åŠŸèƒ½ç¨³å®šæ€§
- **æ–‡æ¡£é½å…¨**: è¯¦ç»†çš„APIæ–‡æ¡£ï¼Œä¾¿äºå‰ç«¯å¼€å‘å¯¹æ¥

### æ‰©å±•å»ºè®®
1. **æ–‡ç« åˆ†ç±»ç®¡ç†**: å¯ä»¥å¼€å‘ç‹¬ç«‹çš„åˆ†ç±»ç®¡ç†åŠŸèƒ½
2. **æ–‡ç« è¯„è®º**: æ·»åŠ æ–‡ç« è¯„è®ºç³»ç»Ÿ
3. **æ–‡ç« æ”¶è—**: ç”¨æˆ·æ–‡ç« æ”¶è—åŠŸèƒ½
4. **æ–‡ç« å®¡æ ¸**: æ–‡ç« å‘å¸ƒå®¡æ ¸æµç¨‹
5. **å¯Œæ–‡æœ¬ç¼–è¾‘**: æ”¯æŒå¯Œæ–‡æœ¬å†…å®¹å’Œå›¾ç‰‡ä¸Šä¼ 

" >> log.md
```

---

## æœ€ä½³å®è·µ

### ğŸ—ï¸ æ¶æ„è®¾è®¡åŸåˆ™

#### 1. åˆ†å±‚æ¶æ„
```
å±•ç¤ºå±‚ (Routes)
    â†“
æ§åˆ¶å±‚ (Controllers)
    â†“
ä¸šåŠ¡å±‚ (Services)
    â†“
æ•°æ®å±‚ (Models)
    â†“
æ•°æ®åº“ (MySQL)
```

#### 2. å•ä¸€èŒè´£åŸåˆ™
- **Controllers**: åªå¤„ç†HTTPè¯·æ±‚å“åº”
- **Services**: åªå¤„ç†ä¸šåŠ¡é€»è¾‘
- **Models**: åªå®šä¹‰æ•°æ®ç»“æ„å’Œå…³ç³»
- **Utils**: åªæä¾›é€šç”¨å·¥å…·å‡½æ•°

#### 3. ä¾èµ–æ³¨å…¥
```javascript
// å¥½çš„åšæ³•
class UserService {
  constructor(userModel, logger) {
    this.userModel = userModel;
    this.logger = logger;
  }
}

// é¿å…ç›´æ¥ä¾èµ–
class UserService {
  createUser() {
    const User = require('../models/User'); // é¿å…
  }
}
```

### ğŸ” å®‰å…¨æœ€ä½³å®è·µ

#### 1. è¾“å…¥éªŒè¯
```javascript
// ä½¿ç”¨express-validatorè¿›è¡Œæ•°æ®éªŒè¯
const validation = [
  body('email').isEmail().normalizeEmail(),
  body('password').isLength({ min: 6 }).escape(),
  handleValidationErrors
];
```

#### 2. SQLæ³¨å…¥é˜²æŠ¤
```javascript
// ä½¿ç”¨Sequelizeå‚æ•°åŒ–æŸ¥è¯¢
User.findAll({
  where: {
    username: req.body.username // è‡ªåŠ¨é˜²æŠ¤
  }
});

// é¿å…åŸç”ŸSQLæ‹¼æ¥
const sql = `SELECT * FROM users WHERE username = '${username}'`; // å±é™©
```

#### 3. è®¤è¯æˆæƒ
```javascript
// åˆ†å±‚æƒé™æ§åˆ¶
router.use(authenticateToken);      // è®¤è¯
router.use(requireRole('admin'));   // æˆæƒ
router.use(requireOwnership());     // èµ„æºæ‰€æœ‰æƒ
```

### ğŸ“Š æ•°æ®åº“è®¾è®¡åŸåˆ™

#### 1. å‘½åè§„èŒƒ
```javascript
// è¡¨åï¼šå¤æ•°å½¢å¼ï¼Œä¸‹åˆ’çº¿å‘½å
tableName: 'user_profiles'

// å­—æ®µåï¼šä¸‹åˆ’çº¿å‘½å
field_name: 'created_at'

// å¤–é”®ï¼šè¡¨å_id
foreign_key: 'user_id'
```

#### 2. ç´¢å¼•ä¼˜åŒ–
```javascript
// ä¸ºç»å¸¸æŸ¥è¯¢çš„å­—æ®µæ·»åŠ ç´¢å¼•
indexes: [
  { name: 'idx_email', fields: ['email'] },
  { name: 'idx_status', fields: ['status'] },
  { name: 'idx_created_at', fields: ['created_at'] }
]
```

#### 3. æ•°æ®ç±»å‹é€‰æ‹©
```javascript
// åˆé€‚çš„æ•°æ®ç±»å‹
id: DataTypes.INTEGER,              // ä¸»é”®ç”¨INTEGER
status: DataTypes.ENUM(...),        // çŠ¶æ€ç”¨ENUM
content: DataTypes.TEXT('long'),    // é•¿æ–‡æœ¬ç”¨TEXT
created_at: DataTypes.DATE          // æ—¶é—´ç”¨DATE
```

### ğŸ“ ä»£ç è§„èŒƒ

#### 1. å‘½åè§„èŒƒ
```javascript
// æ–‡ä»¶å‘½åï¼šå°é©¼å³°å‘½å
userService.js
authController.js

// ç±»å‘½åï¼šå¤§é©¼å³°å‘½å
class UserService {}
class AuthController {}

// å˜é‡å‘½åï¼šå°é©¼å³°å‘½å
const userId = 1;
const userName = 'test';

// å¸¸é‡å‘½åï¼šå¤§å†™ä¸‹åˆ’çº¿
const MAX_RETRY_COUNT = 3;
const API_VERSION = 'v1';
```

#### 2. å‡½æ•°è®¾è®¡
```javascript
// å•ä¸€èŒè´£
function calculateTax(amount) {
  return amount * 0.1;
}

// çº¯å‡½æ•°ï¼ˆæ— å‰¯ä½œç”¨ï¼‰
function formatDate(date, format) {
  // ä¸ä¿®æ”¹è¾“å…¥å‚æ•°
  return moment(date).format(format);
}

// é”™è¯¯å¤„ç†
async function getUserById(id) {
  if (!id) {
    throw new Error('ç”¨æˆ·IDä¸èƒ½ä¸ºç©º');
  }
  
  const user = await User.findByPk(id);
  if (!user) {
    throw new Error('ç”¨æˆ·ä¸å­˜åœ¨');
  }
  
  return user;
}
```

#### 3. æ³¨é‡Šè§„èŒƒ
```javascript
/**
 * ç”¨æˆ·ç™»å½•æœåŠ¡
 * @param {string} account - è´¦æˆ·ï¼ˆç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·ï¼‰
 * @param {string} password - å¯†ç 
 * @param {Object} req - Expressè¯·æ±‚å¯¹è±¡
 * @returns {Promise<Object>} ç™»å½•ç»“æœ
 * @throws {Error} ç™»å½•å¤±è´¥æ—¶æŠ›å‡ºé”™è¯¯
 */
async function login(account, password, req) {
  // å®ç°ä»£ç ...
}
```

### ğŸ§ª æµ‹è¯•ç­–ç•¥

#### 1. æµ‹è¯•é‡‘å­—å¡”
```
         E2E Tests (ç«¯åˆ°ç«¯æµ‹è¯•)
              â†‘ å°‘é‡
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Integration Tests (é›†æˆæµ‹è¯•) 
            â†‘ é€‚é‡
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Unit Tests (å•å…ƒæµ‹è¯•)
      â†‘ å¤§é‡
```

#### 2. æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- **å•å…ƒæµ‹è¯•**: 90%+ è¦†ç›–ç‡
- **é›†æˆæµ‹è¯•**: å…³é”®ä¸šåŠ¡æµç¨‹100%è¦†ç›–
- **E2Eæµ‹è¯•**: ä¸»è¦ç”¨æˆ·åœºæ™¯è¦†ç›–

#### 3. æµ‹è¯•ç¼–å†™åŸåˆ™
```javascript
// AAAæ¨¡å¼ï¼šArrange, Act, Assert
describe('ç”¨æˆ·æœåŠ¡æµ‹è¯•', () => {
  test('åº”è¯¥èƒ½å¤Ÿåˆ›å»ºç”¨æˆ·', async () => {
    // Arrange - å‡†å¤‡æµ‹è¯•æ•°æ®
    const userData = {
      username: 'testuser',
      email: 'test@example.com',
      password: 'password123'
    };
    
    // Act - æ‰§è¡Œæ“ä½œ
    const user = await userService.createUser(userData);
    
    // Assert - éªŒè¯ç»“æœ
    expect(user.id).toBeDefined();
    expect(user.username).toBe(userData.username);
    expect(user.password).not.toBe(userData.password); // åº”è¯¥è¢«åŠ å¯†
  });
});
```

### ğŸ“Š æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ä¼˜åŒ–
```javascript
// ä½¿ç”¨ç´¢å¼•
const users = await User.findAll({
  where: { status: 'active' }, // statuså­—æ®µæœ‰ç´¢å¼•
  order: [['created_at', 'DESC']] // created_atæœ‰ç´¢å¼•
});

// é€‰æ‹©å¿…è¦å­—æ®µ
const users = await User.findAll({
  attributes: ['id', 'username', 'email'], // åªé€‰æ‹©éœ€è¦çš„å­—æ®µ
  limit: 20 // é™åˆ¶è¿”å›æ•°é‡
});

// é¢„åŠ è½½å…³è”æ•°æ®
const articles = await Article.findAll({
  include: [{
    model: User,
    as: 'author',
    attributes: ['id', 'username'] // åªåŠ è½½éœ€è¦çš„å­—æ®µ
  }]
});
```

#### 2. ç¼“å­˜ç­–ç•¥
```javascript
// Redisç¼“å­˜ç¤ºä¾‹
const cache = require('redis').createClient();

async function getUserFromCache(userId) {
  const cacheKey = `user:${userId}`;
  const cached = await cache.get(cacheKey);
  
  if (cached) {
    return JSON.parse(cached);
  }
  
  const user = await User.findByPk(userId);
  await cache.setex(cacheKey, 3600, JSON.stringify(user)); // ç¼“å­˜1å°æ—¶
  
  return user;
}
```

#### 3. åˆ†é¡µä¼˜åŒ–
```javascript
// æ¸¸æ ‡åˆ†é¡µï¼ˆæ¨èç”¨äºå¤§æ•°æ®é‡ï¼‰
async function getArticlesByCursor(cursor, limit = 20) {
  const whereCondition = cursor ? {
    id: { [Op.lt]: cursor } // ä½¿ç”¨ä¸»é”®ä½œä¸ºæ¸¸æ ‡
  } : {};
  
  return Article.findAll({
    where: whereCondition,
    limit,
    order: [['id', 'DESC']]
  });
}
```

---

## éƒ¨ç½²æŒ‡å—

### ğŸ­ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡
```bash
# CentOS/RHEL
sudo yum update -y
sudo yum install -y nodejs npm mysql-server nginx

# Ubuntu/Debian
sudo apt update
sudo apt install -y nodejs npm mysql-server nginx

# ä½¿ç”¨ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18
```

#### 2. åº”ç”¨éƒ¨ç½²é…ç½®
```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /var/www/api-scaffold
sudo chown $USER:$USER /var/www/api-scaffold
cd /var/www/api-scaffold

# å…‹éš†ä»£ç 
git clone <your-repo-url> .

# å®‰è£…ä¾èµ–ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
npm ci --only=production

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
vim .env # é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
```

#### 3. ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½®
```env
# ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹
NODE_ENV=production
PORT=3000

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=scaffold_prod
DB_USER=api_user
DB_PASSWORD=strong_password_here

# JWTå¯†é’¥ï¼ˆå¿…é¡»æ˜¯å¼ºå¯†é’¥ï¼‰
JWT_SECRET=your_very_secure_jwt_secret_at_least_32_characters_long
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# æ–‡ä»¶ä¸Šä¼ 
UPLOAD_DIR=/var/www/uploads
MAX_FILE_SIZE=10MB

# æ—¥å¿—é…ç½®
LOG_LEVEL=info
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d
```

#### 4. MySQL æ•°æ®åº“é…ç½®
```sql
-- åˆ›å»ºç”Ÿäº§æ•°æ®åº“å’Œç”¨æˆ·
CREATE DATABASE scaffold_prod CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'api_user'@'localhost' IDENTIFIED BY 'strong_password_here';
GRANT ALL PRIVILEGES ON scaffold_prod.* TO 'api_user'@'localhost';
FLUSH PRIVILEGES;
```

#### 5. PM2 è¿›ç¨‹ç®¡ç†
```bash
# å®‰è£…PM2
npm install -g pm2

# åˆ›å»ºPM2é…ç½®æ–‡ä»¶
cat > ecosystem.config.js << EOF
module.exports = {
  apps: [{
    name: 'api-scaffold',
    script: 'app.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/pm2-error.log',
    out_file: './logs/pm2-out.log',
    log_file: './logs/pm2-combined.log',
    time: true,
    max_memory_restart: '1G'
  }]
};
EOF

# å¯åŠ¨åº”ç”¨
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

#### 6. Nginx åå‘ä»£ç†é…ç½®
```nginx
# /etc/nginx/sites-available/api-scaffold
server {
    listen 80;
    server_name yourdomain.com;
    
    # é‡å®šå‘åˆ°HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name yourdomain.com;
    
    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /path/to/certificate.crt;
    ssl_certificate_key /path/to/private.key;
    
    # SSLé…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
    ssl_prefer_server_ciphers off;
    
    # è¯·æ±‚ä½“å¤§å°é™åˆ¶
    client_max_body_size 10M;
    
    # APIä»£ç†
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    
    # é™æ€æ–‡ä»¶ç›´æ¥æœåŠ¡
    location /uploads/ {
        alias /var/www/uploads/;
        expires 30d;
        add_header Cache-Control "public, no-transform";
    }
    
    # å®‰å…¨å¤´
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options DENY;
    add_header X-XSS-Protection "1; mode=block";
}
```

#### 7. SSLè¯ä¹¦é…ç½®
```bash
# ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d yourdomain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ï¼š0 12 * * * /usr/bin/certbot renew --quiet
```

### ğŸ³ Docker éƒ¨ç½²

#### 1. Dockerfile
```dockerfile
FROM node:18-alpine

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm ci --only=production && npm cache clean --force

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# åˆ›å»ºérootç”¨æˆ·
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nodejs -u 1001

# æ›´æ”¹æ‰€æœ‰æƒ
RUN chown -R nodejs:nodejs /app
USER nodejs

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/health || exit 1

# å¯åŠ¨åº”ç”¨
CMD ["node", "app.js"]
```

#### 2. docker-compose.yml
```yaml
version: '3.8'

services:
  app:
    build: .
    container_name: api-scaffold
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DB_HOST=mysql
      - DB_USER=api_user
      - DB_PASSWORD=strong_password
      - DB_NAME=scaffold_db
    depends_on:
      - mysql
      - redis
    volumes:
      - uploads:/app/uploads
      - logs:/app/logs
    networks:
      - app-network

  mysql:
    image: mysql:8.0
    container_name: api-mysql
    restart: unless-stopped
    environment:
      - MYSQL_ROOT_PASSWORD=root_password
      - MYSQL_DATABASE=scaffold_db
      - MYSQL_USER=api_user
      - MYSQL_PASSWORD=strong_password
    volumes:
      - mysql_data:/var/lib/mysql
    networks:
      - app-network

  redis:
    image: redis:7-alpine
    container_name: api-redis
    restart: unless-stopped
    networks:
      - app-network

  nginx:
    image: nginx:alpine
    container_name: api-nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - uploads:/var/www/uploads
    depends_on:
      - app
    networks:
      - app-network

volumes:
  mysql_data:
  uploads:
  logs:

networks:
  app-network:
    driver: bridge
```

#### 3. Dockeréƒ¨ç½²å‘½ä»¤
```bash
# æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# è¿›å…¥å®¹å™¨
docker-compose exec app sh

# åœæ­¢æœåŠ¡
docker-compose down

# æ›´æ–°éƒ¨ç½²
docker-compose pull
docker-compose up -d --force-recreate
```

### ğŸ”„ CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²

#### 1. GitHub Actions é…ç½®
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run tests
      run: npm test
      env:
        NODE_ENV: test

  deploy:
    needs: test
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to server
      uses: appleboy/ssh-action@v0.1.5
      with:
        host: ${{ secrets.HOST }}
        username: ${{ secrets.USERNAME }}
        key: ${{ secrets.PRIVATE_KEY }}
        script: |
          cd /var/www/api-scaffold
          git pull origin main
          npm ci --only=production
          npm run migrate
          pm2 reload ecosystem.config.js
```

### ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

#### 1. åº”ç”¨ç›‘æ§
```javascript
// æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
function performanceMonitor(req, res, next) {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = Date.now() - start;
    
    // è®°å½•æ…¢è¯·æ±‚
    if (duration > 1000) {
      logger.warn('Slow request detected', {
        method: req.method,
        url: req.url,
        duration,
        userAgent: req.headers['user-agent']
      });
    }
    
    // è®°å½•é”™è¯¯å“åº”
    if (res.statusCode >= 400) {
      logger.error('Error response', {
        method: req.method,
        url: req.url,
        statusCode: res.statusCode,
        duration
      });
    }
  });
  
  next();
}
```

#### 2. æ—¥å¿—èšåˆ
```bash
# ä½¿ç”¨rsyslogæ”¶é›†æ—¥å¿—
sudo vim /etc/rsyslog.d/50-api-scaffold.conf

# æ·»åŠ é…ç½®
$ModLoad imfile
$InputFileName /var/www/api-scaffold/logs/combined.log
$InputFileTag api-scaffold:
$InputFileStateFile stat-api-scaffold
$InputFileSeverity info
$InputFileFacility local7
$InputRunFileMonitor

# é‡å¯rsyslog
sudo systemctl restart rsyslog
```

#### 3. å¥åº·æ£€æŸ¥è„šæœ¬
```bash
#!/bin/bash
# health-check.sh

API_URL="https://yourdomain.com/health"
TIMEOUT=10

response=$(curl -s -w "%{http_code}" --connect-timeout $TIMEOUT $API_URL)
http_code="${response: -3}"

if [ "$http_code" != "200" ]; then
    echo "API health check failed with code: $http_code"
    # å‘é€å‘Šè­¦é€šçŸ¥
    curl -X POST https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK \
         -H 'Content-type: application/json' \
         --data '{"text":"APIæœåŠ¡å¼‚å¸¸ï¼ŒHTTPçŠ¶æ€ç : '$http_code'"}'
    exit 1
fi

echo "API health check passed"
exit 0
```

---

## å¸¸è§é—®é¢˜

### â“ å¼€å‘é—®é¢˜

#### Q1: æ•°æ®åº“è¿æ¥å¤±è´¥
**é—®é¢˜**: `SequelizeConnectionError: Access denied for user 'root'@'localhost'`

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
2. ç¡®è®¤MySQLæœåŠ¡å·²å¯åŠ¨
3. éªŒè¯æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 
4. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -h localhost -u root -p

# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
sudo systemctl status mysql
```

#### Q2: JWT TokenéªŒè¯å¤±è´¥
**é—®é¢˜**: `JsonWebTokenError: invalid signature`

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ `JWT_SECRET` åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ä¸€è‡´
2. æ£€æŸ¥tokenæ˜¯å¦è¢«æ­£ç¡®ä¼ é€’
3. éªŒè¯tokenæ ¼å¼æ˜¯å¦æ­£ç¡®

```javascript
// è°ƒè¯•token
console.log('Token:', req.headers.authorization);
console.log('JWT_SECRET:', process.env.JWT_SECRET);
```

#### Q3: æƒé™éªŒè¯é—®é¢˜
**é—®é¢˜**: ç”¨æˆ·æœ‰æƒé™ä½†æ¥å£è¿”å›403

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç”¨æˆ·è§’è‰²æ˜¯å¦æ­£ç¡®è®¾ç½®
2. éªŒè¯æƒé™ç­‰çº§é…ç½®
3. ç¡®è®¤è·¯ç”±ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåº

```javascript
// è°ƒè¯•æƒé™
console.log('User role:', req.user.role);
console.log('Required roles:', allowedRoles);
console.log('User level:', authConfig.roleHierarchy[req.user.role]);
```

#### Q4: æ–‡ä»¶ä¸Šä¼ å¤±è´¥
**é—®é¢˜**: æ–‡ä»¶ä¸Šä¼ æ—¶å‡ºç°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
2. ç¡®è®¤æ–‡ä»¶å¤§å°é™åˆ¶
3. éªŒè¯æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸

```bash
# è®¾ç½®ä¸Šä¼ ç›®å½•æƒé™
chmod 755 uploads/
chown -R www-data:www-data uploads/
```

### ğŸš€ æ€§èƒ½é—®é¢˜

#### Q5: APIå“åº”æ…¢
**é—®é¢˜**: æ¥å£å“åº”æ—¶é—´è¶…è¿‡é¢„æœŸ

**è§£å†³æ–¹æ¡ˆ**:
1. æ·»åŠ æ•°æ®åº“ç´¢å¼•
2. ä¼˜åŒ–SQLæŸ¥è¯¢
3. ä½¿ç”¨åˆ†é¡µé™åˆ¶æ•°æ®é‡
4. å®ç°ç¼“å­˜æœºåˆ¶

```javascript
// æ€§èƒ½åˆ†æ
console.time('query');
const result = await User.findAll();
console.timeEnd('query');
```

#### Q6: å†…å­˜å ç”¨è¿‡é«˜
**é—®é¢˜**: Node.jsè¿›ç¨‹å†…å­˜æŒç»­å¢é•¿

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥å†…å­˜æ³„æ¼
2. ä¼˜åŒ–æ•°æ®å¤„ç†é€»è¾‘
3. ä½¿ç”¨æµå¤„ç†å¤§æ–‡ä»¶
4. é…ç½®åƒåœ¾å›æ”¶

```bash
# ç›‘æ§å†…å­˜ä½¿ç”¨
node --inspect app.js
# åœ¨Chromeä¸­æ‰“å¼€ chrome://inspect è°ƒè¯•
```

### ğŸ”’ å®‰å…¨é—®é¢˜

#### Q7: è·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢
**é—®é¢˜**: CORSé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥CORSé…ç½®
2. ç¡®è®¤è¯·æ±‚æ¥æºåŸŸå
3. éªŒè¯é¢„æ£€è¯·æ±‚å¤„ç†

```javascript
// è°ƒè¯•CORS
app.use(cors({
  origin: function (origin, callback) {
    console.log('Request origin:', origin);
    callback(null, true);
  }
}));
```

#### Q8: SQLæ³¨å…¥é£é™©
**é—®é¢˜**: æ•°æ®åº“æŸ¥è¯¢å®‰å…¨æ€§

**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨Sequelizeå‚æ•°åŒ–æŸ¥è¯¢
2. é¿å…æ‹¼æ¥SQLè¯­å¥
3. éªŒè¯ç”¨æˆ·è¾“å…¥

```javascript
// å®‰å…¨æŸ¥è¯¢
const users = await User.findAll({
  where: { username: userInput } // è‡ªåŠ¨è½¬ä¹‰
});

// é¿å…çš„åšæ³•
const sql = `SELECT * FROM users WHERE username = '${userInput}'`;
```

### ğŸ“š æ‰©å±•é—®é¢˜

#### Q9: å¦‚ä½•æ·»åŠ æ–°çš„è®¤è¯æ–¹å¼?
**è§£å†³æ–¹æ¡ˆ**:
1. åœ¨ `authService.js` ä¸­æ·»åŠ æ–°çš„è®¤è¯å‡½æ•°
2. åˆ›å»ºå¯¹åº”çš„è·¯ç”±å’Œæ§åˆ¶å™¨
3. æ›´æ–°è®¤è¯ä¸­é—´ä»¶
4. æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

#### Q10: å¦‚ä½•å®ç°æ•°æ®åº“è¯»å†™åˆ†ç¦»?
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// é…ç½®ä¸»ä»æ•°æ®åº“
const sequelize = new Sequelize({
  replication: {
    read: [
      { host: 'slave1.db.com', username: 'read_user', password: 'pass' },
      { host: 'slave2.db.com', username: 'read_user', password: 'pass' }
    ],
    write: { host: 'master.db.com', username: 'write_user', password: 'pass' }
  }
});
```

#### Q11: å¦‚ä½•å®ç°åˆ†å¸ƒå¼ç¼“å­˜?
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// Redisé›†ç¾¤é…ç½®
const Redis = require('ioredis');
const cluster = new Redis.Cluster([
  { port: 6380, host: '127.0.0.1' },
  { port: 6381, host: '127.0.0.1' },
  { port: 6382, host: '127.0.0.1' }
]);
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### ğŸ“– æ¨èæ–‡æ¡£
- [Express.js å®˜æ–¹æ–‡æ¡£](https://expressjs.com/)
- [Sequelize ORM æ–‡æ¡£](https://sequelize.org/)
- [Jest æµ‹è¯•æ¡†æ¶](https://jestjs.io/)
- [Node.js æœ€ä½³å®è·µ](https://github.com/goldbergyoni/nodebestpractices)

### ğŸ“ è¿›é˜¶å­¦ä¹ 
- [å¾®æœåŠ¡æ¶æ„è®¾è®¡](https://microservices.io/)
- [Redis ç¼“å­˜ç­–ç•¥](https://redis.io/docs/)
- [Docker å®¹å™¨åŒ–](https://docs.docker.com/)
- [Kubernetes ç¼–æ’](https://kubernetes.io/)

### ğŸ› ï¸ æœ‰ç”¨å·¥å…·
- [Postman](https://www.postman.com/) - APIæµ‹è¯•
- [MySQL Workbench](https://www.mysql.com/products/workbench/) - æ•°æ®åº“ç®¡ç†
- [PM2](https://pm2.keymetrics.io/) - è¿›ç¨‹ç®¡ç†
- [Winston](https://github.com/winstonjs/winston) - æ—¥å¿—ç³»ç»Ÿ

---

## ğŸ¯ æ€»ç»“

è¿™ä¸ª **Backend API Scaffold Framework** æä¾›äº†ä¸€ä¸ªå®Œæ•´ã€å¯æ‰©å±•çš„åç«¯APIå¼€å‘æ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

### âœ¨ æ ¸å¿ƒä»·å€¼
- **ğŸš€ å¿«é€Ÿå¼€å‘**: å®Œæ•´çš„åŸºç¡€åŠŸèƒ½ï¼Œå¼€ç®±å³ç”¨
- **ğŸ”’ å®‰å…¨å¯é **: å®Œå–„çš„è®¤è¯ã€æƒé™ã€æ•°æ®éªŒè¯
- **ğŸ“± åŒç«¯æ”¯æŒ**: åŒæ—¶æœåŠ¡å°ç¨‹åºç«¯å’Œç®¡ç†ç«¯
- **ğŸ§ª æµ‹è¯•å®Œå¤‡**: å…¨é¢çš„æµ‹è¯•æ¡†æ¶å’Œç”¨ä¾‹
- **ğŸ“š æ–‡æ¡£é½å…¨**: è¯¦ç»†çš„å¼€å‘å’Œéƒ¨ç½²æŒ‡å—
- **ğŸ—ï¸ æ¶æ„æ¸…æ™°**: åˆ†å±‚è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

### ğŸ–ï¸ é€‚ç”¨åœºæ™¯
- å°ç¨‹åºé¡¹ç›®åç«¯å¼€å‘
- ç®¡ç†åå°ç³»ç»Ÿ
- ç§»åŠ¨APPåç«¯æœåŠ¡
- ä¸­å°å‹Webåº”ç”¨
- å¿«é€ŸåŸå‹å¼€å‘
- å­¦ä¹ ç°ä»£Node.jså¼€å‘

### ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹
- **ç°ä»£æŠ€æœ¯æ ˆ**: Node.js + Express + MySQL + Sequelize
- **å¾®æœåŠ¡å‹å¥½**: æ¸…æ™°çš„æ¨¡å—åŒ–è®¾è®¡
- **äº‘åŸç”Ÿå°±ç»ª**: æ”¯æŒDockerå’ŒKuberneteséƒ¨ç½²
- **æ€§èƒ½ä¼˜åŒ–**: å†…ç½®ç¼“å­˜ã€ç´¢å¼•ã€åˆ†é¡µç­‰ä¼˜åŒ–
- **ç›‘æ§å®Œå–„**: æ—¥å¿—ã€æ€§èƒ½ç›‘æ§ã€å¥åº·æ£€æŸ¥

### ğŸš€ æ‰©å±•æ–¹å‘
åŸºäºè¿™ä¸ªæ¡†æ¶ï¼Œä½ å¯ä»¥ç»§ç»­æ‰©å±•ï¼š
- æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ
- æ–‡ä»¶å­˜å‚¨æœåŠ¡
- å®æ—¶é€šä¿¡åŠŸèƒ½
- æ•°æ®åˆ†ææ¨¡å—
- ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ

å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æŒ‡å—èƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€ŸæŒæ¡æ¡†æ¶çš„ä½¿ç”¨ï¼Œå¹¶æˆåŠŸå¼€å‘å‡ºé«˜è´¨é‡çš„APIæœåŠ¡ï¼

---

**ğŸ’¡ æç¤º**: å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒ"å¸¸è§é—®é¢˜"éƒ¨åˆ†ï¼Œæˆ–è€…æŸ¥çœ‹é¡¹ç›®çš„æµ‹è¯•ç”¨ä¾‹æ¥äº†è§£æœ€ä½³å®è·µã€‚

**ğŸ“§ æ”¯æŒ**: æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªæ¡†æ¶ï¼