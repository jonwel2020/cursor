# æµ‹è¯•ç”¨ä¾‹è¯´æ˜

## é¡¹ç›®æµ‹è¯•ç¯å¢ƒ

æœ¬é¡¹ç›®å·²æˆåŠŸé…ç½®äº†å®Œæ•´çš„æµ‹è¯•ç¯å¢ƒï¼ŒåŒ…æ‹¬ï¼š

### âœ… å·²å®Œæˆçš„æµ‹è¯•ç»„ä»¶

1. **Jest æµ‹è¯•æ¡†æ¶é…ç½®** (`jest.config.js`)
   - æµ‹è¯•ç¯å¢ƒ: Node.js
   - è¦†ç›–ç‡æ”¶é›†å’ŒæŠ¥å‘Š
   - æµ‹è¯•è¶…æ—¶è®¾ç½®
   - å…¨å±€é…ç½®

2. **åŸºç¡€æµ‹è¯•æ–‡ä»¶**
   - `tests/simple.test.js` - åŸºç¡€åŠŸèƒ½éªŒè¯æµ‹è¯•
   - `tests/demo-summary.test.js` - æµ‹è¯•æ¡†æ¶ä½¿ç”¨è¯´æ˜å’Œæœ€ä½³å®è·µ
   - `tests/api-basic.test.js` - åŸºç¡€APIåŠŸèƒ½æµ‹è¯•
   - `tests/encrypt-demo.test.js` - åŠ å¯†å·¥å…·åŠŸèƒ½æµ‹è¯•

3. **æµ‹è¯•è¾…åŠ©å·¥å…·**
   - `tests/helpers/` ç›®å½•ç»“æ„å·²åˆ›å»º
   - åŒ…å«è®¤è¯ã€æ•°æ®åº“ã€è¯·æ±‚ç­‰è¾…åŠ©å‡½æ•°æ¨¡æ¿

## ğŸ¯ å½“å‰å¯è¿è¡Œçš„æµ‹è¯•

### åŸºç¡€æµ‹è¯•å¥—ä»¶
```bash
# è¿è¡Œæ‰€æœ‰åŸºç¡€æµ‹è¯•ï¼ˆæ¨èï¼‰
npm test -- tests/simple.test.js tests/demo-summary.test.js tests/api-basic.test.js

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
npm test -- tests/simple.test.js
npm test -- tests/api-basic.test.js
npm test -- tests/demo-summary.test.js
```

### åŠŸèƒ½æµ‹è¯•
```bash
# åŠ å¯†å·¥å…·æµ‹è¯•
npm test -- tests/encrypt-demo.test.js
```

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### âœ… å·²éªŒè¯çš„åŠŸèƒ½
- Jest æµ‹è¯•æ¡†æ¶æ­£å¸¸å·¥ä½œ
- åŸºç¡€æ•°å­¦è®¡ç®—å’Œé€»è¾‘æµ‹è¯•
- Express API è·¯ç”±æµ‹è¯•
- CORS å’Œå®‰å…¨å¤´é…ç½®æµ‹è¯•
- 404 é”™è¯¯å¤„ç†æµ‹è¯•
- å¥åº·æ£€æŸ¥æ¥å£æµ‹è¯•
- å¯†ç åŠ å¯†å’ŒéªŒè¯åŠŸèƒ½
- JWT Token ç”Ÿæˆå’ŒéªŒè¯

### ğŸ”§ æµ‹è¯•å·¥å…·å’Œæœ€ä½³å®è·µ
- `describe` å’Œ `test` ç»„ç»‡æµ‹è¯•ç»“æ„
- `beforeEach` å’Œ `afterEach` æ•°æ®å‡†å¤‡å’Œæ¸…ç†
- å¼‚æ­¥æµ‹è¯•å¤„ç† (`async/await`)
- é”™è¯¯å¤„ç†æµ‹è¯•
- å¯¹è±¡å±æ€§å’Œæ•°ç»„æ“ä½œéªŒè¯
- å„ç§ Jest æ–­è¨€æ–¹æ³•ç¤ºä¾‹

## ğŸš€ å¯ç”¨å‘½ä»¤

```bash
# åŸºç¡€æµ‹è¯•å‘½ä»¤
npm test                           # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:watch                # ç›‘å¬æ¨¡å¼
npm run test:coverage             # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:verbose              # è¯¦ç»†è¾“å‡º
npm run test:silent               # é™é»˜æ¨¡å¼

# åˆ†ç±»æµ‹è¯•ï¼ˆå½“æ·»åŠ æ›´å¤šæµ‹è¯•æ–‡ä»¶æ—¶ï¼‰
npm run test:unit                 # å•å…ƒæµ‹è¯•
npm run test:integration          # é›†æˆæµ‹è¯•

# ç‰¹å®šæµ‹è¯•
npm test -- <test-file-name>      # è¿è¡Œç‰¹å®šæ–‡ä»¶
npm test -- --testNamePattern="æµ‹è¯•åç§°"  # è¿è¡Œç‰¹å®šæµ‹è¯•
```

## ğŸ›  å¼€å‘å»ºè®®

### æ·»åŠ æ–°æµ‹è¯•æ—¶
1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶éµå¾ª `*.test.js` å‘½åçº¦å®š
2. ä½¿ç”¨ `describe` ç»„ç»‡æµ‹è¯•å¥—ä»¶
3. ä½¿ç”¨ `test` æˆ– `it` å®šä¹‰å•ä¸ªæµ‹è¯•ç”¨ä¾‹
4. åˆ©ç”¨ `beforeEach/afterEach` è¿›è¡Œæ•°æ®å‡†å¤‡å’Œæ¸…ç†
5. å‚è€ƒ `tests/demo-summary.test.js` ä¸­çš„æœ€ä½³å®è·µ

### æµ‹è¯•æ–‡ä»¶ç»„ç»‡
```
tests/
â”œâ”€â”€ simple.test.js           # åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ demo-summary.test.js     # æµ‹è¯•ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
â”œâ”€â”€ api-basic.test.js        # åŸºç¡€APIæµ‹è¯•
â”œâ”€â”€ encrypt-demo.test.js     # åŠ å¯†å·¥å…·æµ‹è¯•
â”œâ”€â”€ helpers/                 # æµ‹è¯•è¾…åŠ©å·¥å…·ï¼ˆå¾…æ‰©å±•ï¼‰
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•ï¼ˆå¾…æ·»åŠ ï¼‰
â””â”€â”€ integration/             # é›†æˆæµ‹è¯•ï¼ˆå¾…æ·»åŠ ï¼‰
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“ä¾èµ–æµ‹è¯•**: ç”±äº MySQL è¿æ¥é…ç½®é—®é¢˜ï¼Œæ¶‰åŠæ•°æ®åº“çš„æµ‹è¯•æš‚æ—¶æ— æ³•è¿è¡Œ
2. **æµ‹è¯•éš”ç¦»**: ç¡®ä¿æµ‹è¯•ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¾èµ–æ‰§è¡Œé¡ºåº
3. **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨ `async/await` å¤„ç†å¼‚æ­¥æ“ä½œ
4. **é”™è¯¯æµ‹è¯•**: æµ‹è¯•æ­£å¸¸æµç¨‹çš„åŒæ—¶ä¹Ÿè¦æµ‹è¯•é”™è¯¯æƒ…å†µ

## ğŸ“ˆ æµ‹è¯•ç»“æœç¤ºä¾‹

è¿è¡ŒåŸºç¡€æµ‹è¯•å¥—ä»¶çš„ç»“æœï¼š
```
 PASS  tests/api-basic.test.js
 PASS  tests/simple.test.js  
 PASS  tests/demo-summary.test.js

Test Suites: 3 passed, 3 total
Tests:       13 passed, 13 total
Snapshots:   0 total
Time:        0.767 s
```

## ğŸ”§ æ‰©å±•æµ‹è¯•æ¡†æ¶

å½“éœ€è¦æ·»åŠ æ›´å¤æ‚çš„æµ‹è¯•æ—¶ï¼Œå¯ä»¥ï¼š

1. **æ•°æ®åº“æµ‹è¯•**: é…ç½®æµ‹è¯•æ•°æ®åº“è¿æ¥
2. **APIé›†æˆæµ‹è¯•**: ä½¿ç”¨ supertest æµ‹è¯•å®Œæ•´APIæµç¨‹  
3. **è®¤è¯æµ‹è¯•**: æµ‹è¯•JWTå’Œæƒé™æ§åˆ¶
4. **æ–‡ä»¶ä¸Šä¼ æµ‹è¯•**: æµ‹è¯•æ–‡ä»¶å¤„ç†åŠŸèƒ½
5. **æ€§èƒ½æµ‹è¯•**: æµ‹è¯•APIå“åº”æ—¶é—´å’Œå¹¶å‘å¤„ç†

å‚è€ƒå·²åˆ›å»ºçš„è¾…åŠ©å·¥å…·æ¨¡æ¿å’Œç¤ºä¾‹ä»£ç è¿›è¡Œæ‰©å±•ã€‚
